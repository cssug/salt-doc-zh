<!DOCTYPE html>







<html>
    <head>
        <meta charset="utf-8">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>salt.fileserver.gitfs</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="google-site-verification" content="1Y-ojT3ndjxA9coB77iUDyXPWxeuQ3T4_r0j-QG6QHg" />

        
        <link rel="stylesheet" href="../../../_static/css/core.min.css">
        <link rel="stylesheet" href="../../../_static/css/webhelp.min_v1.4.4.css">
            <link rel="shortcut icon" href="../../../_static/favicon.ico">

        <!--[if lt IE 9]>
        <script src="../../../_static/js/respond.min.js"></script>
        <![endif]-->
        <link rel="top" title="" href="../../../index.html">
        <link rel="up" title="文件服务内置模块的完整列表" href="index.html">
        <link rel="next" title="salt.fileserver.hgfs" href="salt.fileserver.hgfs.html">
        <link rel="prev" title="salt.fileserver.azurefs" href="salt.fileserver.azurefs.html">
    </head>

    <body class="index">
        <!--[if lt IE 8]>
            <p>You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser.</a></p>
        <![endif]-->
        <div id="wrapper">
            <div id="page-content-wrapper">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-12 col-md-11 col-md-offset-1 col-lg-10 col-lg-offset-1">
                            <!--start navbar-->
                            <nav class="navbar navbar-default">
                                <div class="navbar-header">
                                    <button type="button" class="pull-left navbar-toggle collapsed" id="menu-toggle"><span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                    </button>
                                    <ul id="header-nav" class="nav navbar-nav">
        <li>
            <a href="../../../contents.html" title="Table of Contents">Table of Contents</a>
            
        </li>
        <li>
            <a href="../../../glossary.html" title="Glossary">Glossary</a>
            
        </li>
        <li>
            <a href="salt.fileserver.azurefs.html" title="salt.fileserver.azurefs">上一页</a>
            
        </li>
        <li>
            <a href="salt.fileserver.hgfs.html" title="salt.fileserver.hgfs">下一页</a>
            
        </li>
        <li>
            <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
            
        </li>
        <li>
            <a href="../../../genindex.html" title="总目录">索引</a>
            
        </li> 

                                        

                                        
                                    </ul>
                                </div>
                            </nav>
                            <!--end navbar-->

                            

                            

                            
                            <div class="body-content">
                                
  <div class="section" id="module-salt.fileserver.gitfs">
<span id="salt-fileserver-gitfs"></span><h1>salt.fileserver.gitfs<a class="headerlink" href="#module-salt.fileserver.gitfs" title="永久链接至标题">¶</a></h1>
<p>Git Fileserver Backend</p>
<p>With this backend, branches and tags in a remote git repository are exposed to
salt as different environments.</p>
<p>To enable, add <code class="docutils literal"><span class="pre">git</span></code> to the <a class="reference internal" href="../../configuration/master.html#std:conf_master-fileserver_backend"><code class="xref std std-conf_master docutils literal"><span class="pre">fileserver_backend</span></code></a> option in the
Master config file.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">fileserver_backend</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">git</span>
</pre></div>
</div>
<p>As of Salt 2014.7.0, the Git fileserver backend supports <a class="reference external" href="https://github.com/gitpython-developers/GitPython">GitPython</a>, <a class="reference external" href="https://github.com/libgit2/pygit2">pygit2</a>,
and <a class="reference external" href="https://www.samba.org/~jelmer/dulwich/">dulwich</a> to provide the Python interface to git. If more than one of these
are present, the order of preference for which one will be chosen is the same
as the order in which they were listed: pygit2, GitPython, dulwich (keep in
mind, this order is subject to change).</p>
<p>An optional master config parameter (<a class="reference internal" href="../../configuration/master.html#std:conf_master-gitfs_provider"><code class="xref std std-conf_master docutils literal"><span class="pre">gitfs_provider</span></code></a>) can be used
to specify which provider should be used.</p>
<p>More detailed information on how to use gitfs can be found in the <a class="reference internal" href="../../../topics/tutorials/gitfs.html#tutorial-gitfs"><span>Gitfs
Walkthrough</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>Minimum requirements</p>
<p>To use <a class="reference external" href="https://github.com/gitpython-developers/GitPython">GitPython</a> for gitfs requires a minimum GitPython version of 0.3.0,
as well as the git CLI utility. Instructions for installing GitPython can
be found <a class="reference internal" href="../../../topics/tutorials/gitfs.html#gitfs-dependencies"><span>here</span></a>.</p>
<p>To use <a class="reference external" href="https://github.com/libgit2/pygit2">pygit2</a> for gitfs requires a minimum <a class="reference external" href="https://github.com/libgit2/pygit2">pygit2</a> version of 0.20.3.
<a class="reference external" href="https://github.com/libgit2/pygit2">pygit2</a> 0.20.3 requires <a class="reference external" href="https://libgit2.github.com/">libgit2</a> 0.20.0. <a class="reference external" href="https://github.com/libgit2/pygit2">pygit2</a> and <a class="reference external" href="https://libgit2.github.com/">libgit2</a> are developed
alongside one another, so it is recommended to keep them both at the same
major release to avoid unexpected behavior. For example, <a class="reference external" href="https://github.com/libgit2/pygit2">pygit2</a> 0.21.x
requires <a class="reference external" href="https://libgit2.github.com/">libgit2</a> 0.21.x, <a class="reference external" href="https://github.com/libgit2/pygit2">pygit2</a> 0.22.x will require <a class="reference external" href="https://libgit2.github.com/">libgit2</a> 0.22.x, etc.</p>
<p class="last">To find stale refs, pygit2 additionally requires the git CLI utility to be
installed.</p>
</div>
<dl class="function">
<dt id="salt.fileserver.gitfs.clear_cache">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">clear_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.clear_cache" title="永久链接至目标">¶</a></dt>
<dd><p>Completely clear gitfs cache</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.clear_lock">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">clear_lock</code><span class="sig-paren">(</span><em>remote=None</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.clear_lock" title="永久链接至目标">¶</a></dt>
<dd><p>Clear update.lk</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.dir_list">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">dir_list</code><span class="sig-paren">(</span><em>load</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.dir_list" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个在master所有目录的列表。</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.envs">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">envs</code><span class="sig-paren">(</span><em>ignore_cache=False</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.envs" title="永久链接至目标">¶</a></dt>
<dd><p>Return a list of refs that can be used as environments</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.file_hash">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">file_hash</code><span class="sig-paren">(</span><em>load</em>, <em>fnd</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.file_hash" title="永久链接至目标">¶</a></dt>
<dd><p>返回一个文件hash，hash类型在master配置文件中设置。</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.file_list">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">file_list</code><span class="sig-paren">(</span><em>load</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.file_list" title="永久链接至目标">¶</a></dt>
<dd><p>Return a list of all files on the file server in a specified
environment (specified as a key within the load dict).</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.file_list_emptydirs">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">file_list_emptydirs</code><span class="sig-paren">(</span><em>load</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.file_list_emptydirs" title="永久链接至目标">¶</a></dt>
<dd><p>Return a list of all empty directories on the master</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.find_file">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">find_file</code><span class="sig-paren">(</span><em>path</em>, <em>tgt_env='base'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.find_file" title="永久链接至目标">¶</a></dt>
<dd><p>Find the first file to match the path and ref, read the file out of git
and send the path to the newly cached file</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.init">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">init</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.init" title="永久链接至目标">¶</a></dt>
<dd><p>Initialize remotes. This is only used by the master's pre-flight checks,
and is not invoked by GitFS.</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.lock">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">lock</code><span class="sig-paren">(</span><em>remote=None</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.lock" title="永久链接至目标">¶</a></dt>
<dd><p>Place an update.lk</p>
<p><code class="docutils literal"><span class="pre">remote</span></code> can either be a dictionary containing repo configuration
information, or a pattern. If the latter, then remotes for which the URL
matches the pattern will be locked.</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.serve_file">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">serve_file</code><span class="sig-paren">(</span><em>load</em>, <em>fnd</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.serve_file" title="永久链接至目标">¶</a></dt>
<dd><p>从一个基于接收到的文件中返回数据块</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.symlink_list">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">symlink_list</code><span class="sig-paren">(</span><em>load</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.symlink_list" title="永久链接至目标">¶</a></dt>
<dd><p>Return a dict of all symlinks based on a given path in the repo</p>
</dd></dl>

<dl class="function">
<dt id="salt.fileserver.gitfs.update">
<code class="descclassname">salt.fileserver.gitfs.</code><code class="descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#salt.fileserver.gitfs.update" title="永久链接至目标">¶</a></dt>
<dd><p>Execute a git fetch on all of the repos</p>
</dd></dl>

</div>


                            </div>
                            <a href="salt.fileserver.azurefs.html"><button data-container="body" data-toggle="tooltip" data-placement="bottom" title="salt.fileserver.azurefs" id="prev-button" type="button" class="btn btn-secondary"><span class="glyphicon glyphicon-chevron-left"></span> Previous</button></a>
                            <a href="salt.fileserver.hgfs.html"><button data-container="body" data-toggle="tooltip" data-placement="bottom" title="salt.fileserver.hgfs" id="next-button" type="button" class="btn btn-primary">
                                Next <span class="glyphicon glyphicon-chevron-right"></span></button></a>
                        </div>
                    </div>
                    <div class="footer">
                        <hr />

                        
                    </div> <!--end footer-->

                    </div>
                </div>
            <!--start sidebar-->
            <div id="sidebar-wrapper">
            <div id="sidebar-static">

                <a class="ss-logo" href="http://saltstack.com"><img width="250" height="63" class="nolightbox sidebar-logo" src="../../../_static/images/saltstack_logo.svg"></a>

                
                <div class="versions">
                    <p>Version 2016.3.0-182-gbed98d8</p>
                </div>
                

                <div id="search-form" class="inner-addon left-addon">
                    <i class="glyphicon glyphicon-search"></i>
                    <input type="text" class="form-control">
                </div>

            </div> <!--end sidebar-static-->

                <div id="sidebar-nav">
                    
                    
                    
                    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">SaltStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/installation/index.html">安装教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/configuration/index.html">Configuring Salt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/using_salt.html">Using Salt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/execution/index.html">Remote Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/states/index.html">Configuration Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/event/index.html">Events &amp; Reactor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/orchestrate/index.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/ssh/index.html">Salt SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/cloud/index.html">Salt云端</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/proxyminion/index.html">Salt Proxy Minion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/virt/index.html">Salt Virt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">Command Line Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Salt Module Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../auth/all/index.html">内建身份认证模块的完整列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../beacons/all/index.html">Full list of builtin beacon modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../engines/all/index.html">Full list of builtin engine modules</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">文件服务内置模块的完整列表</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="salt.fileserver.azurefs.html">salt.fileserver.azurefs</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">salt.fileserver.gitfs</a></li>
<li class="toctree-l3"><a class="reference internal" href="salt.fileserver.hgfs.html">salt.fileserver.hgfs</a></li>
<li class="toctree-l3"><a class="reference internal" href="salt.fileserver.minionfs.html">salt.fileserver.minionfs</a></li>
<li class="toctree-l3"><a class="reference internal" href="salt.fileserver.roots.html">salt.fileserver.roots</a></li>
<li class="toctree-l3"><a class="reference internal" href="salt.fileserver.s3fs.html">salt.fileserver.s3fs</a></li>
<li class="toctree-l3"><a class="reference internal" href="salt.fileserver.svnfs.html">salt.fileserver.svnfs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../grains/all/index.html">Full list of builtin grains modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/all/index.html">Full list of builtin execution modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../netapi/all/index.html">Full list of netapi modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../output/all/index.html">完整的内置输出模块的列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pillar/all/index.html">Full list of builtin pillar modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proxy/all/index.html">Full list of builtin proxy modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../queues/all/index.html">Full list of builtin queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../renderers/all/index.html">Full list of builtin renderer modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../returners/all/index.html">所有内置的返回接收器模块列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../roster/all/index.html">Full list of builtin roster modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../runners/all/index.html">Full list of runner modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sdb/all/index.html">Full list of builtin sdb modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../serializers/all/index.html">Full list of builtin serializers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../states/all/index.html">所有内置的state模块列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tops/all/index.html">master内置顶级模块的全部列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wheel/all/index.html">Full list of builtin wheel modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/api.html">APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/topology/index.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/windows/index.html">Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/development/index.html">Salt开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/releases/index.html">Release Notes</a></li>
</ul>

                    
                    
                </div>

                <div id="sidebar-static-bottom">
                <div class="text-nowrap">
                    <!--social icons from http://vervex.deviantart.com/art/somacro-45-300dpi-social-media-icons-267955425-->
                    <ul id="social-links" class="list-inline">
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="watch saltstack videos on youtube" href="https://www.youtube.com/user/saltstack" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/youtube-variation.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="view the latest saltstack tweets" href="http://twitter.com/saltstackinc" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/twitter.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="subscribe to the salt users mailing list" href="https://groups.google.com/forum/#!forum/salt-users" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/email.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="download saltstack code from github" href="https://github.com/saltstack/salt" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/github.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="chat in #salt on freenode irc" href="http://webchat.freenode.net/?channels=salt&uio=mj10cnvljjk9dhj1zsyxmd10cnvl83" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/messenger-generic.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="/r/saltstack" href="http://www.reddit.com/r/saltstack/" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/reddit.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="ask a saltstack question on stackoverflow" href="http://stackoverflow.com/questions/tagged/salt-stack" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/stackoverflow.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="join or start a saltstack meetup" href="http://www.meetup.com/find/?keywords=saltstack" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/meetup.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="follow saltstack on linkedin" href="http://www.linkedin.com/company/salt-stack-inc" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/linkedin.png" ></a></li>
                    </ul>
                </div>
                </div>
            </div>
            <!--end sidebar-->

            </div> <!--end wrapper--> <!--end block content-->
        
    <script>
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../../',
            VERSION:     '2015.8.7',
            SEARCH_CX:   '004624818632696854117:yfmprrbw3pk',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  'true'
        };
    </script>

    <script src="../../../_static/js/core.min.js"></script>

    <script src="../../../_static/js/webhelp.min_v1.4.3.js"></script>

        
    </body>
</html>