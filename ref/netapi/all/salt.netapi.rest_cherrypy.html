<!DOCTYPE html>







<html>
    <head>
        <meta charset="utf-8">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>rest_cherrypy</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="google-site-verification" content="1Y-ojT3ndjxA9coB77iUDyXPWxeuQ3T4_r0j-QG6QHg" />

        
        <link rel="stylesheet" href="../../../_static/css/core.min.css">
        <link rel="stylesheet" href="../../../_static/css/webhelp.min_v1.4.4.css">
            <link rel="shortcut icon" href="../../../_static/favicon.ico">

        <!--[if lt IE 9]>
        <script src="../../../_static/js/respond.min.js"></script>
        <![endif]-->
        <link rel="top" title="" href="../../../index.html">
        <link rel="up" title="Full list of netapi modules" href="index.html">
        <link rel="next" title="rest_tornado" href="salt.netapi.rest_tornado.html">
        <link rel="prev" title="Full list of netapi modules" href="index.html">
    </head>

    <body class="index">
        <!--[if lt IE 8]>
            <p>You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser.</a></p>
        <![endif]-->
        <div id="wrapper">
            <div id="page-content-wrapper">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-12 col-md-11 col-md-offset-1 col-lg-10 col-lg-offset-1">
                            <!--start navbar-->
                            <nav class="navbar navbar-default">
                                <div class="navbar-header">
                                    <button type="button" class="pull-left navbar-toggle collapsed" id="menu-toggle"><span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                    </button>
                                    <ul id="header-nav" class="nav navbar-nav">
        <li>
            <a href="../../../contents.html" title="Table of Contents">Table of Contents</a>
            
        </li>
        <li>
            <a href="../../../glossary.html" title="Glossary">Glossary</a>
            
        </li>
        <li>
            <a href="index.html" title="Full list of netapi modules">上一页</a>
            
        </li>
        <li>
            <a href="salt.netapi.rest_tornado.html" title="rest_tornado">下一页</a>
            
        </li>
        <li>
            <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
            
        </li>
        <li>
            <a href="../../../genindex.html" title="总目录">索引</a>
            
        </li> 

                                        

                                        
                                    </ul>
                                </div>
                            </nav>
                            <!--end navbar-->

                            

                            

                            
                            <div class="body-content">
                                
  <div class="section" id="module-salt.netapi.rest_cherrypy.app">
<span id="rest-cherrypy"></span><h1>rest_cherrypy<a class="headerlink" href="#module-salt.netapi.rest_cherrypy.app" title="永久链接至标题">¶</a></h1>
<div class="section" id="a-rest-api-for-salt">
<h2>A REST API for Salt<a class="headerlink" href="#a-rest-api-for-salt" title="永久链接至标题">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">2014.7.0 新版功能.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">depends:</th><td class="field-body"><ul class="first simple">
<li>CherryPy Python module. Version 3.2.3 is currently recommended when
SSL is enabled, since this version worked the best with SSL in
internal testing. Versions 3.2.3 - 4.x can be used if SSL is not enabled.
Be aware that there is a known
<a class="reference external" href="https://bitbucket.org/cherrypy/cherrypy/issue/1298/ssl-not-working">SSL error</a>
introduced in version 3.2.5. The issue was reportedly resolved with
CherryPy milestone 3.3, but the patch was committed for version 3.6.1.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">optdepends:</th><td class="field-body"><ul class="first simple">
<li>ws4py Python module for websockets support.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">client_libraries:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li>Java: <a class="reference external" href="https://github.com/SUSE/salt-netapi-client">https://github.com/SUSE/salt-netapi-client</a></li>
<li>Python: <a class="reference external" href="https://github.com/saltstack/pepper">https://github.com/saltstack/pepper</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">setup:</th><td class="field-body"><p class="first">All steps below are performed on the machine running the Salt Master
daemon. Configuration goes into the Master configuration file.</p>
<ol class="arabic">
<li><p class="first">Install <code class="docutils literal"><span class="pre">salt-api</span></code>. (This step varies between OS and Linux distros.
Some package systems have a split package, others include salt-api in
the main Salt package. Ensure the <code class="docutils literal"><span class="pre">salt-api</span> <span class="pre">--version</span></code> output matches
the <code class="docutils literal"><span class="pre">salt</span> <span class="pre">--version</span></code> output.)</p>
</li>
<li><p class="first">Install CherryPy. (Read the version caveat in the section above.)</p>
</li>
<li><p class="first">Optional: generate self-signed SSL certificates.</p>
<p>Using a secure HTTPS connection is strongly recommended since Salt
eauth authentication credentials will be sent over the wire.</p>
<ol class="arabic">
<li><p class="first">Install the PyOpenSSL package.</p>
</li>
<li><p class="first">Generate a self-signed certificate using the
<a class="reference internal" href="../../modules/all/salt.modules.tls.html#salt.modules.tls.create_self_signed_cert" title="salt.modules.tls.create_self_signed_cert"><code class="xref py py-func docutils literal"><span class="pre">create_self_signed_cert()</span></code></a> execution
function.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>salt-call --local tls.create_self_signed_cert
</pre></div>
</div>
</li>
</ol>
</li>
<li><p class="first">Edit the master config to create at least one external auth user or
group following the <a class="reference internal" href="../../../topics/eauth/index.html#acl-eauth"><span>full external auth instructions</span></a>.</p>
</li>
<li><p class="first">Edit the master config with the following production-ready example to
enable the <code class="docutils literal"><span class="pre">rest_cherrypy</span></code> module. (Adjust cert paths as needed, or
disable SSL (not recommended!).)</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">rest_cherrypy</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8000</span>
  <span class="l l-Scalar l-Scalar-Plain">ssl_crt</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/pki/tls/certs/localhost.crt</span>
  <span class="l l-Scalar l-Scalar-Plain">ssl_key</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/pki/tls/certs/localhost.key</span>
</pre></div>
</div>
</li>
<li><p class="first">Restart the <code class="docutils literal"><span class="pre">salt-master</span></code> daemon.</p>
</li>
<li><p class="first">Start the <code class="docutils literal"><span class="pre">salt-api</span></code> daemon.</p>
</li>
</ol>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">configuration:</th><td class="field-body"><p class="first">All available configuration options are detailed below. These settings
configure the CherryPy HTTP server and do not apply when using an external
server such as Apache or Nginx.</p>
<dl class="last docutils">
<dt>port</dt>
<dd><p class="first"><strong>Required</strong></p>
<p class="last">The port for the webserver to listen on.</p>
</dd>
<dt>host <span class="classifier-delimiter">:</span> <span class="classifier"><code class="docutils literal"><span class="pre">0.0.0.0</span></code></span></dt>
<dd><p class="first last">The socket interface for the HTTP server to listen on.</p>
</dd>
<dt>debug <span class="classifier-delimiter">:</span> <span class="classifier"><code class="docutils literal"><span class="pre">False</span></code></span></dt>
<dd><p class="first last">Starts the web server in development mode. It will reload itself when
the underlying code is changed and will output more debugging info.</p>
</dd>
<dt>ssl_crt</dt>
<dd><p class="first last">The path to a SSL certificate. (See below)</p>
</dd>
<dt>ssl_key</dt>
<dd><p class="first last">The path to the private key for your SSL certificate. (See below)</p>
</dd>
<dt>disable_ssl</dt>
<dd><p class="first last">A flag to disable SSL. Warning: your Salt authentication credentials
will be sent in the clear!</p>
</dd>
<dt>webhook_disable_auth <span class="classifier-delimiter">:</span> <span class="classifier">False</span></dt>
<dd><p class="first last">The <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Webhook" title="salt.netapi.rest_cherrypy.app.Webhook"><code class="xref py py-class docutils literal"><span class="pre">Webhook</span></code></a> URL requires authentication by default but
external services cannot always be configured to send authentication.
See the Webhook documentation for suggestions on securing this
interface.</p>
</dd>
<dt>webhook_url <span class="classifier-delimiter">:</span> <span class="classifier">/hook</span></dt>
<dd><p class="first last">Configure the URL endpoint for the <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Webhook" title="salt.netapi.rest_cherrypy.app.Webhook"><code class="xref py py-class docutils literal"><span class="pre">Webhook</span></code></a> entry point.</p>
</dd>
<dt>thread_pool <span class="classifier-delimiter">:</span> <span class="classifier"><code class="docutils literal"><span class="pre">100</span></code></span></dt>
<dd><p class="first last">The number of worker threads to start up in the pool.</p>
</dd>
<dt>socket_queue_size <span class="classifier-delimiter">:</span> <span class="classifier"><code class="docutils literal"><span class="pre">30</span></code></span></dt>
<dd><p class="first last">Specify the maximum number of HTTP connections to queue.</p>
</dd>
<dt>expire_responses <span class="classifier-delimiter">:</span> <span class="classifier">True</span></dt>
<dd><p class="first last">Whether to check for and kill HTTP responses that have exceeded the
default timeout.</p>
</dd>
<dt>max_request_body_size <span class="classifier-delimiter">:</span> <span class="classifier"><code class="docutils literal"><span class="pre">1048576</span></code></span></dt>
<dd><p class="first last">Maximum size for the HTTP request body.</p>
</dd>
<dt>collect_stats <span class="classifier-delimiter">:</span> <span class="classifier">False</span></dt>
<dd><p class="first">Collect and report statistics about the CherryPy server</p>
<p class="last">Reports are available via the <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Stats" title="salt.netapi.rest_cherrypy.app.Stats"><code class="xref py py-class docutils literal"><span class="pre">Stats</span></code></a> URL.</p>
</dd>
<dt>static</dt>
<dd><p class="first last">A filesystem path to static HTML/JavaScript/CSS/image assets.</p>
</dd>
<dt>static_path <span class="classifier-delimiter">:</span> <span class="classifier"><code class="docutils literal"><span class="pre">/static</span></code></span></dt>
<dd><p class="first last">The URL prefix to use when serving static assets out of the directory
specified in the <code class="docutils literal"><span class="pre">static</span></code> setting.</p>
</dd>
<dt>app</dt>
<dd><p class="first last">A filesystem path to an HTML file that will be served as a static file.
This is useful for bootstrapping a single-page JavaScript app.</p>
</dd>
<dt>app_path <span class="classifier-delimiter">:</span> <span class="classifier"><code class="docutils literal"><span class="pre">/app</span></code></span></dt>
<dd><p class="first">The URL prefix to use for serving the HTML file specified in the <code class="docutils literal"><span class="pre">app</span></code>
setting. This should be a simple name containing no slashes.</p>
<p class="last">Any path information after the specified path is ignored; this is
useful for apps that utilize the HTML5 history API.</p>
</dd>
<dt>root_prefix <span class="classifier-delimiter">:</span> <span class="classifier"><code class="docutils literal"><span class="pre">/</span></code></span></dt>
<dd><p class="first last">A URL path to the main entry point for the application. This is useful
for serving multiple applications from the same URL.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="section" id="authentication">
<span id="rest-cherrypy-auth"></span><h3>Authentication<a class="headerlink" href="#authentication" title="永久链接至标题">¶</a></h3>
<p>Authentication is performed by passing a session token with each request.
Tokens are generated via the <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Login" title="salt.netapi.rest_cherrypy.app.Login"><code class="xref py py-class docutils literal"><span class="pre">Login</span></code></a> URL.</p>
<p>The token may be sent in one of two ways:</p>
<ul>
<li><p class="first">Include a custom header named <em class="mailheader">X-Auth-Token</em>.</p>
<p>For example, using curl:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -sSk https://localhost:8000/login <span class="se">\</span>
    -H <span class="s1">&#39;Accept: application/x-yaml&#39;</span> <span class="se">\</span>
    -d <span class="nv">username</span><span class="o">=</span>saltdev <span class="se">\</span>
    -d <span class="nv">password</span><span class="o">=</span>saltdev <span class="se">\</span>
    -d <span class="nv">eauth</span><span class="o">=</span>auto
</pre></div>
</div>
<p>Copy the <code class="docutils literal"><span class="pre">token</span></code> value from the output and include it in subsequent requests:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -sSk https://localhost:8000 <span class="se">\</span>
    -H <span class="s1">&#39;Accept: application/x-yaml&#39;</span> <span class="se">\</span>
    -H <span class="s1">&#39;X-Auth-Token: 697adbdc8fe971d09ae4c2a3add7248859c87079&#39;</span><span class="se">\</span>
    -d <span class="nv">client</span><span class="o">=</span><span class="nb">local</span> <span class="se">\</span>
    -d <span class="nv">tgt</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="se">\</span>
    -d <span class="nv">fun</span><span class="o">=</span>test.ping
</pre></div>
</div>
</li>
<li><p class="first">Sent via a cookie. This option is a convenience for HTTP clients that
automatically handle cookie support (such as browsers).</p>
<p>For example, using curl:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Write the cookie file:</span>
curl -sSk https://localhost:8000/login <span class="se">\</span>
      -c ~/cookies.txt <span class="se">\</span>
      -H <span class="s1">&#39;Accept: application/x-yaml&#39;</span> <span class="se">\</span>
      -d <span class="nv">username</span><span class="o">=</span>saltdev <span class="se">\</span>
      -d <span class="nv">password</span><span class="o">=</span>saltdev <span class="se">\</span>
      -d <span class="nv">eauth</span><span class="o">=</span>auto

<span class="c1"># Read the cookie file:</span>
curl -sSk https://localhost:8000 <span class="se">\</span>
      -b ~/cookies.txt <span class="se">\</span>
      -H <span class="s1">&#39;Accept: application/x-yaml&#39;</span> <span class="se">\</span>
      -d <span class="nv">client</span><span class="o">=</span><span class="nb">local</span> <span class="se">\</span>
      -d <span class="nv">tgt</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="se">\</span>
      -d <span class="nv">fun</span><span class="o">=</span>test.ping
</pre></div>
</div>
</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">参见</p>
<p class="last">You can bypass the session handling via the <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Run" title="salt.netapi.rest_cherrypy.app.Run"><code class="xref py py-class docutils literal"><span class="pre">Run</span></code></a> URL.</p>
</div>
</div>
<div class="section" id="usage">
<h3>使用说明<a class="headerlink" href="#usage" title="永久链接至标题">¶</a></h3>
<p>Commands are sent to a running Salt master via this module by sending HTTP
requests to the URLs detailed below.</p>
<div class="admonition-content-negotiation admonition">
<p class="first admonition-title">Content negotiation</p>
<p>This REST interface is flexible in what data formats it will accept as well
as what formats it will return (e.g., JSON, YAML, x-www-form-urlencoded).</p>
<ul class="last simple">
<li>Specify the format of data in the request body by including the
<em class="mailheader">Content-Type</em> header.</li>
<li>Specify the desired data format for the response body with the
<em class="mailheader">Accept</em> header.</li>
</ul>
</div>
<p>Data sent in <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5">POST</a> and <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6">PUT</a> requests  must be in
the format of a list of lowstate dictionaries. This allows multiple commands to
be executed in a single HTTP request. The order of commands in the request
corresponds to the return for each command in the response.</p>
<p>Lowstate, broadly, is a dictionary of values that are mapped to a function
call. This pattern is used pervasively throughout Salt. The functions called
from netapi modules are described in <span class="xref std std-ref">Client Interfaces</span>.</p>
<p>The following example (in JSON format) causes Salt to execute two commands, a
command sent to minions as well as a runner function on the master:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span>
    <span class="s2">&quot;client&quot;</span><span class="p">:</span> <span class="s2">&quot;local&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tgt&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fun&quot;</span><span class="p">:</span> <span class="s2">&quot;test.fib&quot;</span><span class="p">,</span>
    <span class="s2">&quot;arg&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;10&quot;</span><span class="p">]</span>
<span class="p">},</span>
<span class="p">{</span>
    <span class="s2">&quot;client&quot;</span><span class="p">:</span> <span class="s2">&quot;runner&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fun&quot;</span><span class="p">:</span> <span class="s2">&quot;jobs.lookup_jid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;jid&quot;</span><span class="p">:</span> <span class="s2">&quot;20130603122505459265&quot;</span>
<span class="p">}]</span>
</pre></div>
</div>
<div class="admonition-x-www-form-urlencoded admonition">
<p class="first admonition-title">x-www-form-urlencoded</p>
<p>Sending JSON or YAML in the request body is simple and most flexible,
however sending data in urlencoded format is also supported with the
caveats below. It is the default format for HTML forms, many JavaScript
libraries, and the <strong class="command">curl</strong> command.</p>
<p>For example, the equivalent to running <code class="docutils literal"><span class="pre">salt</span> <span class="pre">'*'</span> <span class="pre">test.ping</span></code> is sending
<code class="docutils literal"><span class="pre">fun=test.ping&amp;arg&amp;client=local&amp;tgt=*</span></code> in the HTTP request body.</p>
<p>Caveats:</p>
<ul class="last">
<li><p class="first">Only a single command may be sent per HTTP request.</p>
</li>
<li><p class="first">Repeating the <code class="docutils literal"><span class="pre">arg</span></code> parameter multiple times will cause those
parameters to be combined into a single list.</p>
<p>Note, some popular frameworks and languages (notably jQuery, PHP, and
Ruby on Rails) will automatically append empty brackets onto repeated
parameters. E.g., <code class="docutils literal"><span class="pre">arg=one</span></code>, <code class="docutils literal"><span class="pre">arg=two</span></code> will be sent as <code class="docutils literal"><span class="pre">arg[]=one</span></code>,
<code class="docutils literal"><span class="pre">arg[]=two</span></code>. This is not supported; send JSON or YAML instead.</p>
</li>
</ul>
</div>
</div>
</div>
<span class="target" id="module-salt.netapi.rest_cherrypy.wsgi"></span><div class="section" id="deployment">
<h2>Deployment<a class="headerlink" href="#deployment" title="永久链接至标题">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">rest_cherrypy</span></code> netapi module is a standard Python WSGI app. It can be
deployed one of two ways.</p>
<div class="section" id="salt-api-using-the-cherrypy-server">
<h3><strong class="program">salt-api</strong> using the CherryPy server<a class="headerlink" href="#salt-api-using-the-cherrypy-server" title="永久链接至标题">¶</a></h3>
<p>The default configuration is to run this module using <strong class="program">salt-api</strong> to
start the Python-based CherryPy server. This server is lightweight,
multi-threaded, encrypted with SSL, and should be considered production-ready.</p>
</div>
<div class="section" id="using-a-wsgi-compliant-web-server">
<h3>Using a WSGI-compliant web server<a class="headerlink" href="#using-a-wsgi-compliant-web-server" title="永久链接至标题">¶</a></h3>
<p>This module may be deployed on any WSGI-compliant server such as Apache with
mod_wsgi or Nginx with FastCGI, to name just two (there are many).</p>
<p>Note, external WSGI servers handle URLs, paths, and SSL certs directly. The
<code class="docutils literal"><span class="pre">rest_cherrypy</span></code> configuration options are ignored and the <code class="docutils literal"><span class="pre">salt-api</span></code> daemon
does not need to be running at all. Remember Salt authentication credentials
are sent in the clear unless SSL is being enforced!</p>
<p>An example Apache virtual host configuration:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;VirtualHost *:80&gt;
    ServerName example.com
    ServerAlias *.example.com

    ServerAdmin webmaster@example.com

    LogLevel warn
    ErrorLog /var/www/example.com/logs/error.log
    CustomLog /var/www/example.com/logs/access.log combined

    DocumentRoot /var/www/example.com/htdocs

    WSGIScriptAlias / /path/to/salt/netapi/rest_cherrypy/wsgi.py
&lt;/VirtualHost&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="rest-uri-reference">
<h2>REST URI Reference<a class="headerlink" href="#rest-uri-reference" title="永久链接至标题">¶</a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#id1" id="id2"><code class="docutils literal"><span class="pre">/</span></code></a></li>
<li><a class="reference internal" href="#login" id="id3"><code class="docutils literal"><span class="pre">/login</span></code></a></li>
<li><a class="reference internal" href="#logout" id="id4"><code class="docutils literal"><span class="pre">/logout</span></code></a></li>
<li><a class="reference internal" href="#minions" id="id5"><code class="docutils literal"><span class="pre">/minions</span></code></a></li>
<li><a class="reference internal" href="#jobs" id="id6"><code class="docutils literal"><span class="pre">/jobs</span></code></a></li>
<li><a class="reference internal" href="#run" id="id7"><code class="docutils literal"><span class="pre">/run</span></code></a></li>
<li><a class="reference internal" href="#events" id="id8"><code class="docutils literal"><span class="pre">/events</span></code></a></li>
<li><a class="reference internal" href="#hook" id="id9"><code class="docutils literal"><span class="pre">/hook</span></code></a></li>
<li><a class="reference internal" href="#keys" id="id10"><code class="docutils literal"><span class="pre">/keys</span></code></a></li>
<li><a class="reference internal" href="#ws" id="id11"><code class="docutils literal"><span class="pre">/ws</span></code></a></li>
<li><a class="reference internal" href="#stats" id="id12"><code class="docutils literal"><span class="pre">/stats</span></code></a></li>
</ul>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id2"><code class="docutils literal"><span class="pre">/</span></code></a><a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.LowDataAdapter">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">LowDataAdapter</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.LowDataAdapter" title="永久链接至目标">¶</a></dt>
<dd><p>The primary entry point to Salt's REST API</p>
<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.LowDataAdapter.GET">
<code class="descname">GET</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.LowDataAdapter.GET" title="永久链接至目标">¶</a></dt>
<dd><p>An explanation of the API with links of where to go next</p>
<dl class="get">
<dt id="get--">
<code class="descname">GET </code><code class="descname">/</code><a class="headerlink" href="#get--" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>Accept</strong> -- the desired response format.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><strong>200</strong> -- success</li>
<li><strong>401</strong> -- authentication required</li>
<li><strong>406</strong> -- requested Content-Type not available</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -i localhost:8000
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
</pre></div>
</div>
<p><strong>Example response:</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="salt.netapi.rest_cherrypy.app.LowDataAdapter.POST">
<code class="descname">POST</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.LowDataAdapter.POST" title="永久链接至目标">¶</a></dt>
<dd><p>Mock out specified imports</p>
<p>This allows autodoc to do its thing without having oodles of req'd
installed libs. This doesn't work with <code class="docutils literal"><span class="pre">import</span> <span class="pre">*</span></code> imports.</p>
<p><a class="reference external" href="http://read-the-docs.readthedocs.org/en/latest/faq.html#i-get-import-errors-on-libraries-that-depend-on-c-modules">http://read-the-docs.readthedocs.org/en/latest/faq.html#i-get-import-errors-on-libraries-that-depend-on-c-modules</a></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="login">
<h3><a class="toc-backref" href="#id3"><code class="docutils literal"><span class="pre">/login</span></code></a><a class="headerlink" href="#login" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.Login">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">Login</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Login" title="永久链接至目标">¶</a></dt>
<dd><p>Log in to receive a session token</p>
<p><a class="reference internal" href="#rest-cherrypy-auth"><span>Authentication information</span></a>.</p>
<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.Login.GET">
<code class="descname">GET</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Login.GET" title="永久链接至目标">¶</a></dt>
<dd><p>Present the login interface</p>
<dl class="get">
<dt id="get--login">
<code class="descname">GET </code><code class="descname">/login</code><a class="headerlink" href="#get--login" title="永久链接至目标">¶</a></dt>
<dd><p>An explanation of how to log in.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><strong>200</strong> -- success</li>
<li><strong>401</strong> -- authentication required</li>
<li><strong>406</strong> -- requested Content-Type not available</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -i localhost:8000/login
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/login</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">text/html</span>
</pre></div>
</div>
<p><strong>Example response:</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/html</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.Login.POST">
<code class="descname">POST</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Login.POST" title="永久链接至目标">¶</a></dt>
<dd><p><a class="reference internal" href="#rest-cherrypy-auth"><span>Authenticate</span></a> against Salt's eauth system</p>
<dl class="post">
<dt id="post--login">
<code class="descname">POST </code><code class="descname">/login</code><a class="headerlink" href="#post--login" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>X-Auth-Token</strong> -- a session token from <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Login" title="salt.netapi.rest_cherrypy.app.Login"><code class="xref py py-class docutils literal"><span class="pre">Login</span></code></a>.</li>
<li><strong>Accept</strong> -- the desired response format.</li>
<li><strong>Content-Type</strong> -- the format of the request body.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Form Parameters:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>eauth</strong> -- the eauth backend configured for the user</li>
<li><strong>username</strong> -- username</li>
<li><strong>password</strong> -- password</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><strong>200</strong> -- success</li>
<li><strong>401</strong> -- authentication required</li>
<li><strong>406</strong> -- requested Content-Type not available</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -si localhost:8000/login <span class="se">\</span>
        -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
        -d <span class="nv">username</span><span class="o">=</span><span class="s1">&#39;saltuser&#39;</span> <span class="se">\</span>
        -d <span class="nv">password</span><span class="o">=</span><span class="s1">&#39;saltpass&#39;</span> <span class="se">\</span>
        -d <span class="nv">eauth</span><span class="o">=</span><span class="s1">&#39;pam&#39;</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">42</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>

username=saltuser&amp;password=saltpass&amp;eauth=pam
</pre></div>
</div>
<p><strong>Example response:</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">206</span>
<span class="na">X-Auth-Token</span><span class="o">:</span> <span class="l">6d1b722e</span>
<span class="na">Set-Cookie</span><span class="o">:</span> <span class="l">session_id=6d1b722e; expires=Sat, 17 Nov 2012 03:23:52 GMT; Path=/</span>

<span class="p">{</span><span class="nt">&quot;return&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;token&quot;</span><span class="p">:</span> <span class="s2">&quot;6d1b722e&quot;</span><span class="p">,</span>
    <span class="nt">&quot;start&quot;</span><span class="p">:</span> <span class="mf">1363805943.776223</span><span class="p">,</span>
    <span class="nt">&quot;expire&quot;</span><span class="p">:</span> <span class="mf">1363849143.776224</span><span class="p">,</span>
    <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;saltuser&quot;</span><span class="p">,</span>
    <span class="nt">&quot;eauth&quot;</span><span class="p">:</span> <span class="s2">&quot;pam&quot;</span><span class="p">,</span>
    <span class="nt">&quot;perms&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;grains.*&quot;</span><span class="p">,</span>
        <span class="s2">&quot;status.*&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sys.*&quot;</span><span class="p">,</span>
        <span class="s2">&quot;test.*&quot;</span>
    <span class="p">]</span>
<span class="p">}}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="logout">
<h3><a class="toc-backref" href="#id4"><code class="docutils literal"><span class="pre">/logout</span></code></a><a class="headerlink" href="#logout" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.Logout">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">Logout</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Logout" title="永久链接至目标">¶</a></dt>
<dd><p>Class to remove or invalidate sessions</p>
<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.Logout.POST">
<code class="descname">POST</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Logout.POST" title="永久链接至目标">¶</a></dt>
<dd><p>Destroy the currently active session and expire the session cookie</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="minions">
<h3><a class="toc-backref" href="#id5"><code class="docutils literal"><span class="pre">/minions</span></code></a><a class="headerlink" href="#minions" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.Minions">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">Minions</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Minions" title="永久链接至目标">¶</a></dt>
<dd><p>Convenience URLs for working with minions</p>
<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.Minions.GET">
<code class="descname">GET</code><span class="sig-paren">(</span><em>mid=None</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Minions.GET" title="永久链接至目标">¶</a></dt>
<dd><p>A convenience URL for getting lists of minions or getting minion
details</p>
<dl class="get">
<dt id="get--minions-(mid)">
<code class="descname">GET </code><code class="descname">/minions/</code><span class="sig-paren">(</span><em>mid</em><span class="sig-paren">)</span><a class="headerlink" href="#get--minions-(mid)" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>X-Auth-Token</strong> -- a session token from <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Login" title="salt.netapi.rest_cherrypy.app.Login"><code class="xref py py-class docutils literal"><span class="pre">Login</span></code></a>.</li>
<li><strong>Accept</strong> -- the desired response format.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><strong>200</strong> -- success</li>
<li><strong>401</strong> -- authentication required</li>
<li><strong>406</strong> -- requested Content-Type not available</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -i localhost:8000/minions/ms-3
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/minions/ms-3</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/x-yaml</span>
</pre></div>
</div>
<p><strong>Example response:</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">129005</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-yaml</span>

return:
- ms-3:
    grains.items:
        ...
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.Minions.POST">
<code class="descname">POST</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Minions.POST" title="永久链接至目标">¶</a></dt>
<dd><p>Start an execution command and immediately return the job id</p>
<dl class="post">
<dt id="post--minions">
<code class="descname">POST </code><code class="descname">/minions</code><a class="headerlink" href="#post--minions" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>X-Auth-Token</strong> -- a session token from <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Login" title="salt.netapi.rest_cherrypy.app.Login"><code class="xref py py-class docutils literal"><span class="pre">Login</span></code></a>.</li>
<li><strong>Accept</strong> -- the desired response format.</li>
<li><strong>Content-Type</strong> -- the format of the request body.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Response Headers:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>Content-Type</strong> -- the format of the response body; depends on the
<em class="mailheader">Accept</em> request header.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><strong>200</strong> -- success</li>
<li><strong>401</strong> -- authentication required</li>
<li><strong>406</strong> -- requested Content-Type not available</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><span class="xref std std-term">lowstate</span> data describing Salt commands must be sent in the
request body. The <code class="docutils literal"><span class="pre">client</span></code> option will be set to
<code class="xref py py-meth docutils literal"><span class="pre">local_async()</span></code>.</p>
</dd></dl>

<p><strong>Example request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -sSi localhost:8000/minions <span class="se">\</span>
    -H <span class="s2">&quot;Accept: application/x-yaml&quot;</span> <span class="se">\</span>
    -d <span class="nv">tgt</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="se">\</span>
    -d <span class="nv">fun</span><span class="o">=</span><span class="s1">&#39;status.diskusage&#39;</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/minions</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/x-yaml</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">26</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>

tgt=*&amp;fun=status.diskusage
</pre></div>
</div>
<p><strong>Example response:</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">86</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-yaml</span>

return:
- jid: &#39;20130603122505459265&#39;
  minions: [ms-4, ms-3, ms-2, ms-1, ms-0]
_links:
  jobs:
    - href: /jobs/20130603122505459265
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="jobs">
<h3><a class="toc-backref" href="#id6"><code class="docutils literal"><span class="pre">/jobs</span></code></a><a class="headerlink" href="#jobs" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.Jobs">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">Jobs</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Jobs" title="永久链接至目标">¶</a></dt>
<dd><dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.Jobs.GET">
<code class="descname">GET</code><span class="sig-paren">(</span><em>jid=None</em>, <em>timeout=''</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Jobs.GET" title="永久链接至目标">¶</a></dt>
<dd><p>A convenience URL for getting lists of previously run jobs or getting
the return from a single job</p>
<dl class="get">
<dt id="get--jobs-(jid)">
<code class="descname">GET </code><code class="descname">/jobs/</code><span class="sig-paren">(</span><em>jid</em><span class="sig-paren">)</span><a class="headerlink" href="#get--jobs-(jid)" title="永久链接至目标">¶</a></dt>
<dd><p>List jobs or show a single job from the job cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>X-Auth-Token</strong> -- a session token from <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Login" title="salt.netapi.rest_cherrypy.app.Login"><code class="xref py py-class docutils literal"><span class="pre">Login</span></code></a>.</li>
<li><strong>Accept</strong> -- the desired response format.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><strong>200</strong> -- success</li>
<li><strong>401</strong> -- authentication required</li>
<li><strong>406</strong> -- requested Content-Type not available</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -i localhost:8000/jobs
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/jobs</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/x-yaml</span>
</pre></div>
</div>
<p><strong>Example response:</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">165</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-yaml</span>

return:
- &#39;20121130104633606931&#39;:
    Arguments:
    - &#39;3&#39;
    Function: test.fib
    Start Time: 2012, Nov 30 10:46:33.606931
    Target: jerry
    Target-type: glob
</pre></div>
</div>
<p><strong>Example request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -i localhost:8000/jobs/20121130104633606931
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/jobs/20121130104633606931</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/x-yaml</span>
</pre></div>
</div>
<p><strong>Example response:</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">73</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-yaml</span>

info:
- Arguments:
    - &#39;3&#39;
    Function: test.fib
    Minions:
    - jerry
    Start Time: 2012, Nov 30 10:46:33.606931
    Target: &#39;*&#39;
    Target-type: glob
    User: saltdev
    jid: &#39;20121130104633606931&#39;
return:
- jerry:
    - - 0
    - 1
    - 1
    - 2
    - 6.9141387939453125e-06
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="run">
<h3><a class="toc-backref" href="#id7"><code class="docutils literal"><span class="pre">/run</span></code></a><a class="headerlink" href="#run" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.Run">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">Run</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Run" title="永久链接至目标">¶</a></dt>
<dd><p>Class to run commands without normal session handling</p>
<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.Run.POST">
<code class="descname">POST</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Run.POST" title="永久链接至目标">¶</a></dt>
<dd><p>Run commands bypassing the <a class="reference internal" href="#rest-cherrypy-auth"><span>normal session handling</span></a></p>
<dl class="post">
<dt id="post--run">
<code class="descname">POST </code><code class="descname">/run</code><a class="headerlink" href="#post--run" title="永久链接至目标">¶</a></dt>
<dd><p>This entry point is primarily for &quot;one-off&quot; commands. Each request
must pass full Salt authentication credentials. Otherwise this URL
is identical to the <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.LowDataAdapter.POST" title="salt.netapi.rest_cherrypy.app.LowDataAdapter.POST"><code class="xref py py-meth docutils literal"><span class="pre">root</span> <span class="pre">URL</span> <span class="pre">(/)</span></code></a>.</p>
<p><span class="xref std std-term">lowstate</span> data describing Salt commands must be sent in the
request body.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><strong>200</strong> -- success</li>
<li><strong>401</strong> -- authentication required</li>
<li><strong>406</strong> -- requested Content-Type not available</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -sS localhost:8000/run <span class="se">\</span>
    -H <span class="s1">&#39;Accept: application/x-yaml&#39;</span> <span class="se">\</span>
    -d <span class="nv">client</span><span class="o">=</span><span class="s1">&#39;local&#39;</span> <span class="se">\</span>
    -d <span class="nv">tgt</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="se">\</span>
    -d <span class="nv">fun</span><span class="o">=</span><span class="s1">&#39;test.ping&#39;</span> <span class="se">\</span>
    -d <span class="nv">username</span><span class="o">=</span><span class="s1">&#39;saltdev&#39;</span> <span class="se">\</span>
    -d <span class="nv">password</span><span class="o">=</span><span class="s1">&#39;saltdev&#39;</span> <span class="se">\</span>
    -d <span class="nv">eauth</span><span class="o">=</span><span class="s1">&#39;pam&#39;</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/run</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/x-yaml</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">75</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>

client=local&amp;tgt=*&amp;fun=test.ping&amp;username=saltdev&amp;password=saltdev&amp;eauth=pam
</pre></div>
</div>
<p><strong>Example response:</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">73</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-yaml</span>

return:
- ms-0: true
    ms-1: true
    ms-2: true
    ms-3: true
    ms-4: true
</pre></div>
</div>
<p>The /run enpoint can also be used to issue commands using the salt-ssh subsystem.</p>
<p>When using salt-ssh, eauth credentials should not be supplied. Instad, authentication
should be handled by the SSH layer itself. The use of the salt-ssh client does not
require a salt master to be running. Instead, only a roster file must be present
in the salt configuration directory.</p>
<p>All SSH client requests are synchronous.</p>
<p><strong>Example SSH client request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -sS localhost:8000/run <span class="se">\</span>
    -H <span class="s1">&#39;Accept: application/x-yaml&#39;</span> <span class="se">\</span>
    -d <span class="nv">client</span><span class="o">=</span><span class="s1">&#39;ssh&#39;</span> <span class="se">\</span>
    -d <span class="nv">tgt</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="se">\</span>
    -d <span class="nv">fun</span><span class="o">=</span><span class="s1">&#39;test.ping&#39;</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/run</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/x-yaml</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">75</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>

client=ssh&amp;tgt=*&amp;fun=test.ping
</pre></div>
</div>
<p><strong>Example SSH response:</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span>return:
- silver:
  fun: test.ping
  fun_args: []
  id: silver
  jid: &#39;20141203103525666185&#39;
  retcode: 0
  return: true
  success: true
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="events">
<h3><a class="toc-backref" href="#id8"><code class="docutils literal"><span class="pre">/events</span></code></a><a class="headerlink" href="#events" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.Events">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">Events</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Events" title="永久链接至目标">¶</a></dt>
<dd><p>Expose the Salt event bus</p>
<p>The event bus on the Salt master exposes a large variety of things, notably
when executions are started on the master and also when minions ultimately
return their results. This URL provides a real-time window into a running
Salt infrastructure.</p>
<div class="admonition seealso">
<p class="first admonition-title">参见</p>
<p class="last"><a class="reference internal" href="../../../topics/event/index.html#events"><span>Events &amp; Reactor</span></a></p>
</div>
<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.Events.GET">
<code class="descname">GET</code><span class="sig-paren">(</span><em>token=None</em>, <em>salt_token=None</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Events.GET" title="永久链接至目标">¶</a></dt>
<dd><p>An HTTP stream of the Salt master event bus</p>
<p>This stream is formatted per the Server Sent Events (SSE) spec. Each
event is formatted as JSON.</p>
<dl class="get">
<dt id="get--events">
<code class="descname">GET </code><code class="descname">/events</code><a class="headerlink" href="#get--events" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first simple">
<li><strong>200</strong> -- success</li>
<li><strong>401</strong> -- authentication required</li>
<li><strong>406</strong> -- requested Content-Type not available</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Query Parameters:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><strong>token</strong> -- <strong>optional</strong> parameter containing the token
ordinarily supplied via the X-Auth-Token header in order to
allow cross-domain requests in browsers that do not include
CORS support in the EventSource API. E.g.,
<code class="docutils literal"><span class="pre">curl</span> <span class="pre">-NsS</span> <span class="pre">localhost:8000/events?token=308650d</span></code></li>
<li><strong>salt_token</strong> -- <strong>optional</strong> parameter containing a raw Salt
<em>eauth token</em> (not to be confused with the token returned from
the /login URL). E.g.,
<code class="docutils literal"><span class="pre">curl</span> <span class="pre">-NsS</span> <span class="pre">localhost:8000/events?salt_token=30742765</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -NsS localhost:8000/events
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/events</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
</pre></div>
</div>
<p><strong>Example response:</strong></p>
<p>Note, the <code class="docutils literal"><span class="pre">tag</span></code> field is not part of the spec. SSE compliant clients
should ignore unknown fields. This addition allows non-compliant
clients to only watch for certain tags without having to deserialze the
JSON object each time.</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Connection</span><span class="o">:</span> <span class="l">keep-alive</span>
<span class="na">Cache-Control</span><span class="o">:</span> <span class="l">no-cache</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/event-stream;charset=utf-8</span>

retry: 400

tag: salt/job/20130802115730568475/new
data: {&#39;tag&#39;: &#39;salt/job/20130802115730568475/new&#39;, &#39;data&#39;: {&#39;minions&#39;: [&#39;ms-4&#39;, &#39;ms-3&#39;, &#39;ms-2&#39;, &#39;ms-1&#39;, &#39;ms-0&#39;]}}

tag: salt/job/20130802115730568475/ret/jerry
data: {&#39;tag&#39;: &#39;salt/job/20130802115730568475/ret/jerry&#39;, &#39;data&#39;: {&#39;jid&#39;: &#39;20130802115730568475&#39;, &#39;return&#39;: True, &#39;retcode&#39;: 0, &#39;success&#39;: True, &#39;cmd&#39;: &#39;_return&#39;, &#39;fun&#39;: &#39;test.ping&#39;, &#39;id&#39;: &#39;ms-1&#39;}}
</pre></div>
</div>
<p>The event stream can be easily consumed via JavaScript:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventSource</span><span class="p">(</span><span class="s1">&#39;/events&#39;</span><span class="p">);</span>
<span class="nx">source</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Listening ...&#39;</span><span class="p">)</span> <span class="p">};</span>
<span class="nx">source</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">};</span>
<span class="nx">source</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">saltEvent</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">saltEvent</span><span class="p">.</span><span class="nx">tag</span><span class="p">)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="nx">saltEvent</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Or using CORS:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventSource</span><span class="p">(</span><span class="s1">&#39;/events?token=ecd589e4e01912cf3c4035afad73426dbb8dba75&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">withCredentials</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
</pre></div>
</div>
<p>It is also possible to consume the stream via the shell.</p>
<p>Records are separated by blank lines; the <code class="docutils literal"><span class="pre">data:</span></code> and <code class="docutils literal"><span class="pre">tag:</span></code>
prefixes will need to be removed manually before attempting to
unserialize the JSON.</p>
<p>curl's <code class="docutils literal"><span class="pre">-N</span></code> flag turns off input buffering which is required to
process the stream incrementally.</p>
<p>Here is a basic example of printing each event as it comes in:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -NsS localhost:8000/events <span class="p">|</span><span class="se">\</span>
        <span class="k">while</span> <span class="nv">IFS</span><span class="o">=</span> <span class="nb">read</span> -r line <span class="p">;</span> <span class="k">do</span>
            <span class="nb">echo</span> $line
        <span class="k">done</span>
</pre></div>
</div>
<p>Here is an example of using awk to filter events based on tag:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -NsS localhost:8000/events <span class="p">|</span><span class="se">\</span>
        awk <span class="s1">&#39;</span>
<span class="s1">            BEGIN { RS=&quot;&quot;; FS=&quot;\\n&quot; }</span>
<span class="s1">            $1 ~ /^tag: salt\/job\/[0-9]+\/new$/ { print $0 }</span>
<span class="s1">        &#39;</span>
tag: salt/job/20140112010149808995/new
data: <span class="o">{</span><span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;salt/job/20140112010149808995/new&quot;</span>, <span class="s2">&quot;data&quot;</span>: <span class="o">{</span><span class="s2">&quot;tgt_type&quot;</span>: <span class="s2">&quot;glob&quot;</span>, <span class="s2">&quot;jid&quot;</span>: <span class="s2">&quot;20140112010149808995&quot;</span>, <span class="s2">&quot;tgt&quot;</span>: <span class="s2">&quot;jerry&quot;</span>, <span class="s2">&quot;_stamp&quot;</span>: <span class="s2">&quot;2014-01-12_01:01:49.809617&quot;</span>, <span class="s2">&quot;user&quot;</span>: <span class="s2">&quot;shouse&quot;</span>, <span class="s2">&quot;arg&quot;</span>: <span class="o">[]</span>, <span class="s2">&quot;fun&quot;</span>: <span class="s2">&quot;test.ping&quot;</span>, <span class="s2">&quot;minions&quot;</span>: <span class="o">[</span><span class="s2">&quot;jerry&quot;</span><span class="o">]}}</span>
tag: 20140112010149808995
data: <span class="o">{</span><span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;20140112010149808995&quot;</span>, <span class="s2">&quot;data&quot;</span>: <span class="o">{</span><span class="s2">&quot;fun_args&quot;</span>: <span class="o">[]</span>, <span class="s2">&quot;jid&quot;</span>: <span class="s2">&quot;20140112010149808995&quot;</span>, <span class="s2">&quot;return&quot;</span>: true, <span class="s2">&quot;retcode&quot;</span>: 0, <span class="s2">&quot;success&quot;</span>: true, <span class="s2">&quot;cmd&quot;</span>: <span class="s2">&quot;_return&quot;</span>, <span class="s2">&quot;_stamp&quot;</span>: <span class="s2">&quot;2014-01-12_01:01:49.819316&quot;</span>, <span class="s2">&quot;fun&quot;</span>: <span class="s2">&quot;test.ping&quot;</span>, <span class="s2">&quot;id&quot;</span>: <span class="s2">&quot;jerry&quot;</span><span class="o">}}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="hook">
<h3><a class="toc-backref" href="#id9"><code class="docutils literal"><span class="pre">/hook</span></code></a><a class="headerlink" href="#hook" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.Webhook">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">Webhook</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Webhook" title="永久链接至目标">¶</a></dt>
<dd><p>A generic web hook entry point that fires an event on Salt's event bus</p>
<p>External services can POST data to this URL to trigger an event in Salt.
For example, Amazon SNS, Jenkins-CI or Travis-CI, or GitHub web hooks.</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p>Be mindful of security</p>
<p>Salt's Reactor can run any code. A Reactor SLS that responds to a hook
event is responsible for validating that the event came from a trusted
source and contains valid data.</p>
<p><strong>This is a generic interface and securing it is up to you!</strong></p>
<p class="last">This URL requires authentication however not all external services can
be configured to authenticate. For this reason authentication can be
selectively disabled for this URL. Follow best practices -- always use
SSL, pass a secret key, configure the firewall to only allow traffic
from a known source, etc.</p>
</div>
<p>The event data is taken from the request body. The
<em class="mailheader">Content-Type</em> header is respected for the payload.</p>
<p>The event tag is prefixed with <code class="docutils literal"><span class="pre">salt/netapi/hook</span></code> and the URL path is
appended to the end. For example, a <code class="docutils literal"><span class="pre">POST</span></code> request sent to
<code class="docutils literal"><span class="pre">/hook/mycompany/myapp/mydata</span></code> will produce a Salt event with the tag
<code class="docutils literal"><span class="pre">salt/netapi/hook/mycompany/myapp/mydata</span></code>.</p>
<p>The following is an example <code class="docutils literal"><span class="pre">.travis.yml</span></code> file to send notifications to
Salt of successful test runs:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">language</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="l l-Scalar l-Scalar-Plain">script</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">python -m unittest tests</span>
<span class="l l-Scalar l-Scalar-Plain">after_success</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="p p-Indicator">|</span>
        <span class="no">curl -sSk https://saltapi-url.example.com:8000/hook/travis/build/success                         -d branch=&quot;${TRAVIS_BRANCH}&quot;                         -d commit=&quot;${TRAVIS_COMMIT}&quot;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参见</p>
<p class="last"><a class="reference internal" href="../../../topics/event/index.html#events"><span>Events &amp; Reactor</span></a>, <span class="xref std std-ref">reactor</span></p>
</div>
<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.Webhook.POST">
<code class="descname">POST</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Webhook.POST" title="永久链接至目标">¶</a></dt>
<dd><p>Fire an event in Salt with a custom event tag and data</p>
<dl class="post">
<dt id="post--hook">
<code class="descname">POST </code><code class="descname">/hook</code><a class="headerlink" href="#post--hook" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><strong>200</strong> -- success</li>
<li><strong>401</strong> -- authentication required</li>
<li><strong>406</strong> -- requested Content-Type not available</li>
<li><strong>413</strong> -- request body is too large</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example request:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -sS localhost:8000/hook -d <span class="nv">foo</span><span class="o">=</span><span class="s1">&#39;Foo!&#39;</span> -d <span class="nv">bar</span><span class="o">=</span><span class="s1">&#39;Bar!&#39;</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/hook</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">16</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>

foo=Foo&amp;bar=Bar!
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">14</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span><span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">}</span>
</pre></div>
</div>
<p>As a practical example, an internal continuous-integration build
server could send an HTTP POST request to the URL
<code class="docutils literal"><span class="pre">https://localhost:8000/hook/mycompany/build/success</span></code> which contains
the result of a build and the SHA of the version that was built as
JSON. That would then produce the following event in Salt that could be
used to kick off a deployment via Salt's Reactor:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Event fired at Fri Feb 14 17:40:11 2014
*************************
Tag: salt/netapi/hook/mycompany/build/success
Data:
{&#39;_stamp&#39;: &#39;2014-02-14_17:40:11.440996&#39;,
    &#39;headers&#39;: {
        &#39;X-My-Secret-Key&#39;: &#39;F0fAgoQjIT@W&#39;,
        &#39;Content-Length&#39;: &#39;37&#39;,
        &#39;Content-Type&#39;: &#39;application/json&#39;,
        &#39;Host&#39;: &#39;localhost:8000&#39;,
        &#39;Remote-Addr&#39;: &#39;127.0.0.1&#39;},
    &#39;post&#39;: {&#39;revision&#39;: &#39;aa22a3c4b2e7&#39;, &#39;result&#39;: True}}
</pre></div>
</div>
<p>Salt's Reactor could listen for the event:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">reactor</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;salt/netapi/hook/mycompany/build/*&#39;</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/srv/reactor/react_ci_builds.sls</span>
</pre></div>
</div>
<p>And finally deploy the new build:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span>{% set secret_key = data.get(&#39;headers&#39;, {}).get(&#39;X-My-Secret-Key&#39;) %}
{% set build = data.get(&#39;post&#39;, {}) %}

{% if secret_key == &#39;F0fAgoQjIT@W&#39; and build.result == True %}
deploy_my_app:
  cmd.state.sls:
    - tgt: &#39;application*&#39;
    - arg:
      - myapp.deploy
    - kwarg:
        pillar:
          revision: {{ revision }}
{% endif %}
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="keys">
<h3><a class="toc-backref" href="#id10"><code class="docutils literal"><span class="pre">/keys</span></code></a><a class="headerlink" href="#keys" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.Keys">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">Keys</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Keys" title="永久链接至目标">¶</a></dt>
<dd><p>Convenience URLs for working with minion keys</p>
<div class="versionadded">
<p><span class="versionmodified">2014.7.0 新版功能.</span></p>
</div>
<p>These URLs wrap the functionality provided by the <a class="reference internal" href="../../wheel/all/salt.wheel.key.html#module-salt.wheel.key" title="salt.wheel.key"><code class="xref py py-mod docutils literal"><span class="pre">key</span> <span class="pre">wheel</span>
<span class="pre">module</span></code></a> functions.</p>
<dl class="attribute">
<dt id="salt.netapi.rest_cherrypy.app.Keys.GET">
<code class="descname">GET</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Keys.GET" title="永久链接至目标">¶</a></dt>
<dd><p>Mock out specified imports</p>
<p>This allows autodoc to do its thing without having oodles of req'd
installed libs. This doesn't work with <code class="docutils literal"><span class="pre">import</span> <span class="pre">*</span></code> imports.</p>
<p><a class="reference external" href="http://read-the-docs.readthedocs.org/en/latest/faq.html#i-get-import-errors-on-libraries-that-depend-on-c-modules">http://read-the-docs.readthedocs.org/en/latest/faq.html#i-get-import-errors-on-libraries-that-depend-on-c-modules</a></p>
</dd></dl>

<dl class="attribute">
<dt id="salt.netapi.rest_cherrypy.app.Keys.POST">
<code class="descname">POST</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Keys.POST" title="永久链接至目标">¶</a></dt>
<dd><p>Mock out specified imports</p>
<p>This allows autodoc to do its thing without having oodles of req'd
installed libs. This doesn't work with <code class="docutils literal"><span class="pre">import</span> <span class="pre">*</span></code> imports.</p>
<p><a class="reference external" href="http://read-the-docs.readthedocs.org/en/latest/faq.html#i-get-import-errors-on-libraries-that-depend-on-c-modules">http://read-the-docs.readthedocs.org/en/latest/faq.html#i-get-import-errors-on-libraries-that-depend-on-c-modules</a></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="ws">
<h3><a class="toc-backref" href="#id11"><code class="docutils literal"><span class="pre">/ws</span></code></a><a class="headerlink" href="#ws" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.WebsocketEndpoint">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">WebsocketEndpoint</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.WebsocketEndpoint" title="永久链接至目标">¶</a></dt>
<dd><p>Open a WebSocket connection to Salt's event bus</p>
<p>The event bus on the Salt master exposes a large variety of things, notably
when executions are started on the master and also when minions ultimately
return their results. This URL provides a real-time window into a running
Salt infrastructure. Uses websocket as the transport mechanism.</p>
<div class="admonition seealso">
<p class="first admonition-title">参见</p>
<p class="last"><a class="reference internal" href="../../../topics/event/index.html#events"><span>Events &amp; Reactor</span></a></p>
</div>
<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.WebsocketEndpoint.GET">
<code class="descname">GET</code><span class="sig-paren">(</span><em>token=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.WebsocketEndpoint.GET" title="永久链接至目标">¶</a></dt>
<dd><p>Return a websocket connection of Salt's event stream</p>
<dl class="get">
<dt id="get--ws-(token)">
<code class="descname">GET </code><code class="descname">/ws/</code><span class="sig-paren">(</span><em>token</em><span class="sig-paren">)</span><a class="headerlink" href="#get--ws-(token)" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Query format_events:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">The event stream will undergo server-side
formatting if the <code class="docutils literal"><span class="pre">format_events</span></code> URL parameter is included
in the request. This can be useful to avoid formatting on the
client-side:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -NsS &lt;...snip...&gt; localhost:8000/ws?format_events
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Reqheader X-Auth-Token:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">an authentication token from
<a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Login" title="salt.netapi.rest_cherrypy.app.Login"><code class="xref py py-class docutils literal"><span class="pre">Login</span></code></a>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Status 101:</th><td class="field-body"><p class="first">switching to the websockets protocol</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Status 401:</th><td class="field-body"><p class="first">authentication required</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Status 406:</th><td class="field-body"><p class="first last">requested Content-Type not available</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example request:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span>curl -NsSk \
    -H &#39;X-Auth-Token: ffedf49d&#39; \
    -H &#39;Host: localhost:8000&#39; \
    -H &#39;Connection: Upgrade&#39; \
    -H &#39;Upgrade: websocket&#39; \
    -H &#39;Origin: https://localhost:8000&#39; \
    -H &#39;Sec-WebSocket-Version: 13&#39; \
    -H &#39;Sec-WebSocket-Key: &#39;&quot;$(echo -n $RANDOM | base64)&quot; \
    localhost:8000/ws
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/ws</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Connection</span><span class="o">:</span> <span class="l">Upgrade</span>
<span class="na">Upgrade</span><span class="o">:</span> <span class="l">websocket</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">localhost:8000</span>
<span class="na">Origin</span><span class="o">:</span> <span class="l">https://localhost:8000</span>
<span class="na">Sec-WebSocket-Version</span><span class="o">:</span> <span class="l">13</span>
<span class="na">Sec-WebSocket-Key</span><span class="o">:</span> <span class="l">s65VsgHigh7v/Jcf4nXHnA==</span>
<span class="na">X-Auth-Token</span><span class="o">:</span> <span class="l">ffedf49d</span>
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">101</span> <span class="ne">Switching Protocols</span>
<span class="na">Upgrade</span><span class="o">:</span> <span class="l">websocket</span>
<span class="na">Connection</span><span class="o">:</span> <span class="l">Upgrade</span>
<span class="na">Sec-WebSocket-Accept</span><span class="o">:</span> <span class="l">mWZjBV9FCglzn1rIKJAxrTFlnJE=</span>
<span class="na">Sec-WebSocket-Version</span><span class="o">:</span> <span class="l">13</span>
</pre></div>
</div>
<p>An authentication token <strong>may optionally</strong> be passed as part of the URL
for browsers that cannot be configured to send the authentication
header or cookie:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl -NsS &lt;...snip...&gt; localhost:8000/ws/ffedf49d
</pre></div>
</div>
<p>The event stream can be easily consumed via JavaScript:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="c1">// Note, you must be authenticated!</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Websocket</span><span class="p">(</span><span class="s1">&#39;ws://localhost:8000/ws/d0ce6c1a&#39;</span><span class="p">);</span>
<span class="nx">source</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;error!&#39;</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span> <span class="p">};</span>
<span class="nx">source</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span> <span class="p">};</span>

<span class="nx">source</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;websocket client ready&#39;</span><span class="p">)</span>

<span class="nx">source</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
</pre></div>
</div>
<p>Or via Python, using the Python module <a class="reference external" href="https://pypi.python.org/pypi/websocket-client/">websocket-client</a> for example.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Note, you must be authenticated!</span>

<span class="kn">from</span> <span class="nn">websocket</span> <span class="kn">import</span> <span class="n">create_connection</span>

<span class="n">ws</span> <span class="o">=</span> <span class="n">create_connection</span><span class="p">(</span><span class="s1">&#39;ws://localhost:8000/ws/d0ce6c1a&#39;</span><span class="p">)</span>
<span class="n">ws</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;websocket client ready&#39;</span><span class="p">)</span>

<span class="c1"># Look at https://pypi.python.org/pypi/websocket-client/ for more</span>
<span class="c1"># examples.</span>
<span class="k">while</span> <span class="n">listening_to_events</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">ws</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>

<span class="n">ws</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Above examples show how to establish a websocket connection to Salt and
activating real time updates from Salt's event stream by signaling
<code class="docutils literal"><span class="pre">websocket</span> <span class="pre">client</span> <span class="pre">ready</span></code>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="stats">
<h3><a class="toc-backref" href="#id12"><code class="docutils literal"><span class="pre">/stats</span></code></a><a class="headerlink" href="#stats" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="salt.netapi.rest_cherrypy.app.Stats">
<em class="property">class </em><code class="descclassname">salt.netapi.rest_cherrypy.app.</code><code class="descname">Stats</code><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Stats" title="永久链接至目标">¶</a></dt>
<dd><p>Expose statistics on the running CherryPy server</p>
<dl class="method">
<dt id="salt.netapi.rest_cherrypy.app.Stats.GET">
<code class="descname">GET</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#salt.netapi.rest_cherrypy.app.Stats.GET" title="永久链接至目标">¶</a></dt>
<dd><p>Return a dump of statistics collected from the CherryPy server</p>
<dl class="get">
<dt id="get--stats">
<code class="descname">GET </code><code class="descname">/stats</code><a class="headerlink" href="#get--stats" title="永久链接至目标">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>X-Auth-Token</strong> -- a session token from <a class="reference internal" href="#salt.netapi.rest_cherrypy.app.Login" title="salt.netapi.rest_cherrypy.app.Login"><code class="xref py py-class docutils literal"><span class="pre">Login</span></code></a>.</li>
<li><strong>Accept</strong> -- the desired response format.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Response Headers:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>Content-Type</strong> -- the format of the response body; depends on the
<em class="mailheader">Accept</em> request header.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><strong>200</strong> -- success</li>
<li><strong>401</strong> -- authentication required</li>
<li><strong>406</strong> -- requested Content-Type not available</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</dd></dl>

</div>
</div>
</div>


                            </div>
                            <a href="index.html"><button data-container="body" data-toggle="tooltip" data-placement="bottom" title="Full list of netapi modules" id="prev-button" type="button" class="btn btn-secondary"><span class="glyphicon glyphicon-chevron-left"></span> Previous</button></a>
                            <a href="salt.netapi.rest_tornado.html"><button data-container="body" data-toggle="tooltip" data-placement="bottom" title="rest_tornado" id="next-button" type="button" class="btn btn-primary">
                                Next <span class="glyphicon glyphicon-chevron-right"></span></button></a>
                        </div>
                    </div>
                    <div class="footer">
                        <hr />

                        
                    </div> <!--end footer-->

                    </div>
                </div>
            <!--start sidebar-->
            <div id="sidebar-wrapper">
            <div id="sidebar-static">

                <a class="ss-logo" href="http://saltstack.com"><img width="250" height="63" class="nolightbox sidebar-logo" src="../../../_static/images/saltstack_logo.svg"></a>

                
                <div class="versions">
                    <p>Version 2016.3.0-182-gbed98d8</p>
                </div>
                

                <div id="search-form" class="inner-addon left-addon">
                    <i class="glyphicon glyphicon-search"></i>
                    <input type="text" class="form-control">
                </div>

            </div> <!--end sidebar-static-->

                <div id="sidebar-nav">
                    
                    
                    
                    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">SaltStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/installation/index.html">安装教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/configuration/index.html">Configuring Salt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/using_salt.html">Using Salt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/execution/index.html">Remote Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/states/index.html">Configuration Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/event/index.html">Events &amp; Reactor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/orchestrate/index.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/ssh/index.html">Salt SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/cloud/index.html">Salt云端</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/proxyminion/index.html">Salt Proxy Minion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/virt/index.html">Salt Virt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">Command Line Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Salt Module Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../auth/all/index.html">内建身份认证模块的完整列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../beacons/all/index.html">Full list of builtin beacon modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../engines/all/index.html">Full list of builtin engine modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../file_server/all/index.html">文件服务内置模块的完整列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../grains/all/index.html">Full list of builtin grains modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/all/index.html">Full list of builtin execution modules</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Full list of netapi modules</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">rest_cherrypy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-rest-api-for-salt">A REST API for Salt</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#authentication">Authentication</a></li>
<li class="toctree-l5"><a class="reference internal" href="#usage">使用说明</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#deployment">Deployment</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#salt-api-using-the-cherrypy-server"><strong class="program">salt-api</strong> using the CherryPy server</a></li>
<li class="toctree-l5"><a class="reference internal" href="#using-a-wsgi-compliant-web-server">Using a WSGI-compliant web server</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#rest-uri-reference">REST URI Reference</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id1"><code class="docutils literal"><span class="pre">/</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#login"><code class="docutils literal"><span class="pre">/login</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#logout"><code class="docutils literal"><span class="pre">/logout</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#minions"><code class="docutils literal"><span class="pre">/minions</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#jobs"><code class="docutils literal"><span class="pre">/jobs</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#run"><code class="docutils literal"><span class="pre">/run</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#events"><code class="docutils literal"><span class="pre">/events</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#hook"><code class="docutils literal"><span class="pre">/hook</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#keys"><code class="docutils literal"><span class="pre">/keys</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#ws"><code class="docutils literal"><span class="pre">/ws</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#stats"><code class="docutils literal"><span class="pre">/stats</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="salt.netapi.rest_tornado.html">rest_tornado</a></li>
<li class="toctree-l3"><a class="reference internal" href="salt.netapi.rest_wsgi.html">rest_wsgi</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../output/all/index.html">完整的内置输出模块的列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pillar/all/index.html">Full list of builtin pillar modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proxy/all/index.html">Full list of builtin proxy modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../queues/all/index.html">Full list of builtin queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../renderers/all/index.html">Full list of builtin renderer modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../returners/all/index.html">所有内置的返回接收器模块列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../roster/all/index.html">Full list of builtin roster modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../runners/all/index.html">Full list of runner modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sdb/all/index.html">Full list of builtin sdb modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../serializers/all/index.html">Full list of builtin serializers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../states/all/index.html">所有内置的state模块列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tops/all/index.html">master内置顶级模块的全部列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wheel/all/index.html">Full list of builtin wheel modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/api.html">APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/topology/index.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/windows/index.html">Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/development/index.html">Salt开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../topics/releases/index.html">Release Notes</a></li>
</ul>

                    
                    
                </div>

                <div id="sidebar-static-bottom">
                <div class="text-nowrap">
                    <!--social icons from http://vervex.deviantart.com/art/somacro-45-300dpi-social-media-icons-267955425-->
                    <ul id="social-links" class="list-inline">
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="watch saltstack videos on youtube" href="https://www.youtube.com/user/saltstack" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/youtube-variation.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="view the latest saltstack tweets" href="http://twitter.com/saltstackinc" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/twitter.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="subscribe to the salt users mailing list" href="https://groups.google.com/forum/#!forum/salt-users" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/email.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="download saltstack code from github" href="https://github.com/saltstack/salt" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/github.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="chat in #salt on freenode irc" href="http://webchat.freenode.net/?channels=salt&uio=mj10cnvljjk9dhj1zsyxmd10cnvl83" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/messenger-generic.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="/r/saltstack" href="http://www.reddit.com/r/saltstack/" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/reddit.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="ask a saltstack question on stackoverflow" href="http://stackoverflow.com/questions/tagged/salt-stack" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/stackoverflow.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="join or start a saltstack meetup" href="http://www.meetup.com/find/?keywords=saltstack" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/meetup.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="follow saltstack on linkedin" href="http://www.linkedin.com/company/salt-stack-inc" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/linkedin.png" ></a></li>
                    </ul>
                </div>
                </div>
            </div>
            <!--end sidebar-->

            </div> <!--end wrapper--> <!--end block content-->
        
    <script>
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../../',
            VERSION:     '2015.8.7',
            SEARCH_CX:   '004624818632696854117:yfmprrbw3pk',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  'true'
        };
    </script>

    <script src="../../../_static/js/core.min.js"></script>

    <script src="../../../_static/js/webhelp.min_v1.4.3.js"></script>

        
    </body>
</html>