<!DOCTYPE html>







<html>
    <head>
        <meta charset="utf-8">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Writing Unit Tests</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="google-site-verification" content="1Y-ojT3ndjxA9coB77iUDyXPWxeuQ3T4_r0j-QG6QHg" />

        
        <link rel="stylesheet" href="../../../_static/css/core.min.css">
        <link rel="stylesheet" href="../../../_static/css/webhelp.min_v1.4.4.css">
            <link rel="shortcut icon" href="../../../_static/favicon.ico">

        <!--[if lt IE 9]>
        <script src="../../../_static/js/respond.min.js"></script>
        <![endif]-->
        <link rel="top" title="" href="../../../index.html">
        <link rel="up" title="Running The Tests" href="index.html">
        <link rel="next" title="raet" href="../raet/index.html">
        <link rel="prev" title="Integration Tests" href="integration.html">
    </head>

    <body class="index">
        <!--[if lt IE 8]>
            <p>You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser.</a></p>
        <![endif]-->
        <div id="wrapper">
            <div id="page-content-wrapper">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-12 col-md-11 col-md-offset-1 col-lg-10 col-lg-offset-1">
                            <!--start navbar-->
                            <nav class="navbar navbar-default">
                                <div class="navbar-header">
                                    <button type="button" class="pull-left navbar-toggle collapsed" id="menu-toggle"><span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                    </button>
                                    <ul id="header-nav" class="nav navbar-nav">
        <li>
            <a href="../../../contents.html" title="Table of Contents">Table of Contents</a>
            
        </li>
        <li>
            <a href="../../../glossary.html" title="Glossary">Glossary</a>
            
        </li>
        <li>
            <a href="integration.html" title="Integration Tests">上一页</a>
            
        </li>
        <li>
            <a href="../raet/index.html" title="raet">下一页</a>
            
        </li>
        <li>
            <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
            
        </li>
        <li>
            <a href="../../../genindex.html" title="总目录">索引</a>
            
        </li> 

                                        

                                        
                                    </ul>
                                </div>
                            </nav>
                            <!--end navbar-->

                            

                            

                            
                            <div class="body-content">
                                
  <div class="section" id="writing-unit-tests">
<h1>Writing Unit Tests<a class="headerlink" href="#writing-unit-tests" title="永久链接至标题">¶</a></h1>
<div class="section" id="introduction">
<h2>引子<a class="headerlink" href="#introduction" title="永久链接至标题">¶</a></h2>
<p>Like many software projects, Salt has two broad-based testing approaches --
integration testing and unit testing. While integration testing focuses on the
interaction between components in a sandboxed environment, unit testing focuses
on the singular implementation of individual functions.</p>
</div>
<div class="section" id="preparing-to-write-a-unit-test">
<h2>Preparing to Write a Unit Test<a class="headerlink" href="#preparing-to-write-a-unit-test" title="永久链接至标题">¶</a></h2>
<p>This guide assumes you've followed the <a class="reference external" href="http://docs.saltstack.com/topics/installation/index.html">directions for setting up salt testing</a>.</p>
<p>Unit tests should be written to the following specifications:</p>
<ul class="simple">
<li>Each <code class="docutils literal"><span class="pre">raise</span></code> and <code class="docutils literal"><span class="pre">return</span></code> statement needs to be independently tested.</li>
<li>Unit tests for <code class="docutils literal"><span class="pre">salt/.../&lt;module&gt;.py</span></code> are contained in a file called
<code class="docutils literal"><span class="pre">tests/unit/.../&lt;module&gt;_test.py</span></code>, e.g. the tests for
<code class="docutils literal"><span class="pre">salt/modules/fib.py</span></code> are in <code class="docutils literal"><span class="pre">tests/unit/modules/fib_test.py</span></code>.</li>
<li>Test functions are named <code class="docutils literal"><span class="pre">test_&lt;fcn&gt;_&lt;test-name&gt;</span></code> where <code class="docutils literal"><span class="pre">&lt;fcn&gt;</span></code> is the
function being tested and <code class="docutils literal"><span class="pre">&lt;test-name&gt;</span></code> describes the <code class="docutils literal"><span class="pre">raise</span></code> or
<code class="docutils literal"><span class="pre">return</span></code> being tested.</li>
<li>A reasonable effort needs to be made to mock external resources used in the
code being tested, such as APIs, function calls, external data either
globally available or passed in through function arguments, file data, etc.</li>
<li>Test functions should contain only one assertion and all necessary mock code
and data for that assertion.</li>
</ul>
<p>Most commonly, the following imports are necessary to create a unit test:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Import Salt Testing libs</span>
<span class="kn">from</span> <span class="nn">salttesting</span> <span class="kn">import</span> <span class="n">skipIf</span><span class="p">,</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">salttesting.helpers</span> <span class="kn">import</span> <span class="n">ensure_in_syspath</span>
</pre></div>
</div>
<p>If you need mock support to your tests, please also import:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">salttesting.mock</span> <span class="kn">import</span> <span class="n">NO_MOCK</span><span class="p">,</span> <span class="n">NO_MOCK_REASON</span><span class="p">,</span> <span class="n">MagicMock</span><span class="p">,</span> <span class="n">patch</span><span class="p">,</span> <span class="n">call</span>
</pre></div>
</div>
</div>
<div class="section" id="a-simple-example">
<h2>A Simple Example<a class="headerlink" href="#a-simple-example" title="永久链接至标题">¶</a></h2>
<p>Let's assume that we're testing a very basic function in an imaginary Salt
execution module. Given a module called <code class="docutils literal"><span class="pre">fib.py</span></code> that has a function called
<code class="docutils literal"><span class="pre">calculate(num_of_results)</span></code>, which given a <code class="docutils literal"><span class="pre">num_of_results</span></code>, produces a list of
sequential Fibonacci numbers of that length.</p>
<p>A unit test to test this function might be commonly placed in a file called
<code class="docutils literal"><span class="pre">tests/unit/modules/fib_test.py</span></code>. The convention is to place unit tests for
Salt execution modules in <code class="docutils literal"><span class="pre">test/unit/modules/</span></code> and to name the tests module
suffixed with <code class="docutils literal"><span class="pre">_test.py</span></code>.</p>
<p>Tests are grouped around test cases, which are logically grouped sets of tests
against a piece of functionality in the tested software. Test cases are created
as Python classes in the unit test module. To return to our example, here's how
we might write the skeleton for testing <code class="docutils literal"><span class="pre">fib.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Import Salt Testing libs</span>
<span class="kn">from</span> <span class="nn">salttesting</span> <span class="kn">import</span> <span class="n">TestCase</span>

<span class="c1"># Import Salt execution module to test</span>
<span class="kn">from</span> <span class="nn">salt.modules</span> <span class="kn">import</span> <span class="n">fib</span>

<span class="c1"># Create test case class and inherit from Salt&#39;s customized TestCase</span>
<span class="k">class</span> <span class="nc">FibTestCase</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This class contains a set of functions that test salt.modules.fib.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">test_fib</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        To create a unit test, we should prefix the name with `test_&#39; so</span>
<span class="sd">        that it&#39;s recognized by the test runner.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">fib_five</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fib</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">fib_five</span><span class="p">)</span>
</pre></div>
</div>
<p>At this point, the test can now be run, either individually or as a part of a
full run of the test runner. To ease development, a single test can be
executed:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>tests/runtests.py -v -n unit.modules.fib_test
</pre></div>
</div>
<p>This will report the status of the test: success, failure, or error.  The
<code class="docutils literal"><span class="pre">-v</span></code> flag increases output verbosity.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>tests/runtests.py -n unit.modules.fib_test -v
</pre></div>
</div>
<p>To review the results of a particular run, take a note of the log location
given in the output for each test:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>Logging tests on /var/folders/nl/d809xbq577l3qrbj3ymtpbq80000gn/T/salt-runtests.log
</pre></div>
</div>
</div>
<div class="section" id="evaluating-truth">
<h2>Evaluating Truth<a class="headerlink" href="#evaluating-truth" title="永久链接至标题">¶</a></h2>
<p>A longer discussion on the types of assertions one can make can be found by
reading <a class="reference external" href="http://docs.python.org/2/library/unittest.html#unittest.TestCase">Python's documentation on unit testing</a>.</p>
</div>
<div class="section" id="tests-using-mock-objects">
<h2>Tests Using Mock Objects<a class="headerlink" href="#tests-using-mock-objects" title="永久链接至标题">¶</a></h2>
<p>In many cases, the purpose of a Salt module is to interact with some external
system, whether it be to control a database, manipulate files on a filesystem
or something else. In these varied cases, it's necessary to design a unit test
which can test the function whilst replacing functions which might actually
call out to external systems. One might think of this as &quot;blocking the exits&quot;
for code under tests and redirecting the calls to external systems with our own
code which produces known results during the duration of the test.</p>
<p>To achieve this behavior, Salt makes heavy use of the <a class="reference external" href="http://www.voidspace.org.uk/python/mock/index.html">MagicMock package</a>.</p>
<p>To understand how one might integrate Mock into writing a unit test for Salt,
let's imagine a scenario in which we're testing an execution module that's
designed to operate on a database. Furthermore, let's imagine two separate
methods, here presented in pseduo-code in an imaginary execution module called
'db.py.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_user</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="n">qry</span> <span class="o">=</span> <span class="s1">&#39;CREATE USER {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
    <span class="n">execute_query</span><span class="p">(</span><span class="n">qry</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">execute_query</span><span class="p">(</span><span class="n">qry</span><span class="p">):</span>
    <span class="c1"># Connect to a database and actually do the query...</span>
</pre></div>
</div>
<p>Here, let's imagine that we want to create a unit test for the <cite>create_user</cite>
function. In doing so, we want to avoid any calls out to an external system and
so while we are running our unit tests, we want to replace the actual
interaction with a database with a function that can capture the parameters
sent to it and return pre-defined values. Therefore, our task is clear -- to
write a unit test which tests the functionality of <cite>create_user</cite> while also
replacing 'execute_query' with a mocked function.</p>
<p>To begin, we set up the skeleton of our class much like we did before, but with
additional imports for MagicMock:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Import Salt Testing libs</span>
<span class="kn">from</span> <span class="nn">salttesting</span> <span class="kn">import</span> <span class="n">TestCase</span>

<span class="c1"># Import Salt execution module to test</span>
<span class="kn">from</span> <span class="nn">salt.modules</span> <span class="kn">import</span> <span class="n">db</span>

<span class="c1"># Import Mock libraries</span>
<span class="kn">from</span> <span class="nn">salttesting.mock</span> <span class="kn">import</span> <span class="n">NO_MOCK</span><span class="p">,</span> <span class="n">NO_MOCK_REASON</span><span class="p">,</span> <span class="n">MagicMock</span><span class="p">,</span> <span class="n">patch</span><span class="p">,</span> <span class="n">call</span>

<span class="c1"># Create test case class and inherit from Salt&#39;s customized TestCase</span>
<span class="c1"># Skip this test case if we don&#39;t have access to mock!</span>
<span class="nd">@skipIf</span><span class="p">(</span><span class="n">NO_MOCK</span><span class="p">,</span> <span class="n">NO_MOCK_REASON</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">DbTestCase</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_create_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># First, we replace &#39;execute_query&#39; with our own mock function</span>
        <span class="n">db</span><span class="o">.</span><span class="n">execute_query</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">()</span>

        <span class="c1"># Now that the exits are blocked, we can run the function under test.</span>
        <span class="n">db</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="s1">&#39;testuser&#39;</span><span class="p">)</span>

        <span class="c1"># We could now query our mock object to see which calls were made</span>
        <span class="c1"># to it.</span>
        <span class="c1">## print db.execute_query.mock_calls</span>

        <span class="c1"># Construct a call object that simulates the way we expected</span>
        <span class="c1"># execute_query to have been called.</span>
        <span class="n">expected_call</span> <span class="o">=</span> <span class="n">call</span><span class="p">(</span><span class="s1">&#39;CREATE USER testuser&#39;</span><span class="p">)</span>

        <span class="c1"># Compare the expected call with the list of actual calls.  The</span>
        <span class="c1"># test will succeed or fail depending on the output of this</span>
        <span class="c1"># assertion.</span>
        <span class="n">db</span><span class="o">.</span><span class="n">execute_query</span><span class="o">.</span><span class="n">assert_has_calls</span><span class="p">(</span><span class="n">expected_call</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="modifying-salt-in-place">
<h2>Modifying <code class="docutils literal"><span class="pre">__salt__</span></code> In Place<a class="headerlink" href="#modifying-salt-in-place" title="永久链接至标题">¶</a></h2>
<p>At times, it becomes necessary to make modifications to a module's view of
functions in its own <code class="docutils literal"><span class="pre">__salt__</span></code> dictionary.  Luckily, this process is quite
easy.</p>
<p>Below is an example that uses MagicMock's <code class="docutils literal"><span class="pre">patch</span></code> functionality to insert a
function into <code class="docutils literal"><span class="pre">__salt__</span></code> that's actually a MagicMock instance.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">show_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">patch</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">my_module</span><span class="o">.</span><span class="n">__salt__</span><span class="p">,</span>
                    <span class="p">{</span><span class="s1">&#39;function.to_replace&#39;</span><span class="p">:</span> <span class="n">MagicMock</span><span class="p">()}:</span>
        <span class="c1"># From this scope, carry on with testing, with a modified __salt__!</span>
</pre></div>
</div>
</div>
<div class="section" id="a-more-complete-example">
<h2>A More Complete Example<a class="headerlink" href="#a-more-complete-example" title="永久链接至标题">¶</a></h2>
<p>Consider the following function from salt/modules/linux_sysctl.py.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Return a single sysctl parameter for this minion</span>

<span class="sd">    CLI Example:</span>

<span class="sd">    .. code-block:: bash</span>

<span class="sd">        salt &#39;*&#39; sysctl.get net.ipv4.ip_forward</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;sysctl -n {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">__salt__</span><span class="p">[</span><span class="s1">&#39;cmd.run&#39;</span><span class="p">](</span><span class="n">cmd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
<p>This function is very simple, comprising only four source lines of code and
having only one return statement, so we know only one test is needed.  There
are also two inputs to the function, the <code class="docutils literal"><span class="pre">name</span></code> function argument and the call
to <code class="docutils literal"><span class="pre">__salt__['cmd.run']()</span></code>, both of which need to be appropriately mocked.</p>
<p>Mocking a function parameter is straightforward, whereas mocking a function
call will require, in this case, the use of MagicMock.  For added isolation, we
will also redefine the <code class="docutils literal"><span class="pre">__salt__</span></code> dictionary such that it only contains
<code class="docutils literal"><span class="pre">'cmd.run'</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Import Salt Libs</span>
<span class="kn">from</span> <span class="nn">salt.modules</span> <span class="kn">import</span> <span class="n">linux_sysctl</span>

<span class="c1"># Import Salt Testing Libs</span>
<span class="kn">from</span> <span class="nn">salttesting</span> <span class="kn">import</span> <span class="n">skipIf</span><span class="p">,</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">salttesting.helpers</span> <span class="kn">import</span> <span class="n">ensure_in_syspath</span>
<span class="kn">from</span> <span class="nn">salttesting.mock</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">MagicMock</span><span class="p">,</span>
    <span class="n">patch</span><span class="p">,</span>
    <span class="n">NO_MOCK</span><span class="p">,</span>
    <span class="n">NO_MOCK_REASON</span>
<span class="p">)</span>

<span class="n">ensure_in_syspath</span><span class="p">(</span><span class="s1">&#39;../../&#39;</span><span class="p">)</span>

<span class="c1"># Globals</span>
<span class="n">linux_sysctl</span><span class="o">.</span><span class="n">__salt__</span> <span class="o">=</span> <span class="p">{}</span>


<span class="nd">@skipIf</span><span class="p">(</span><span class="n">NO_MOCK</span><span class="p">,</span> <span class="n">NO_MOCK_REASON</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">LinuxSysctlTestCase</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    TestCase for salt.modules.linux_sysctl module</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">test_get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Tests the return of get function</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">mock_cmd</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">patch</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">linux_sysctl</span><span class="o">.</span><span class="n">__salt__</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;cmd.run&#39;</span><span class="p">:</span> <span class="n">mock_cmd</span><span class="p">}):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linux_sysctl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;net.ipv4.ip_forward&#39;</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">integration</span> <span class="kn">import</span> <span class="n">run_tests</span>
    <span class="n">run_tests</span><span class="p">(</span><span class="n">LinuxSysctlTestCase</span><span class="p">,</span> <span class="n">needs_daemon</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Since <code class="docutils literal"><span class="pre">get()</span></code> has only one raise or return statement and that statement is a
success condition, the test function is simply named <code class="docutils literal"><span class="pre">test_get()</span></code>.  As
described, the single function call parameter, <code class="docutils literal"><span class="pre">name</span></code> is mocked with
<code class="docutils literal"><span class="pre">net.ipv4.ip_forward</span></code> and <code class="docutils literal"><span class="pre">__salt__['cmd.run']</span></code> is replaced by a MagicMock
function object.  We are only interested in the return value of
<code class="docutils literal"><span class="pre">__salt__['cmd.run']</span></code>, which MagicMock allows us by specifying via
<code class="docutils literal"><span class="pre">return_value=1</span></code>.  Finally, the test itself tests for equality between the
return value of <code class="docutils literal"><span class="pre">get()</span></code> and the expected return of <code class="docutils literal"><span class="pre">1</span></code>.  This assertion is
expected to succeed because <code class="docutils literal"><span class="pre">get()</span></code> will determine its return value from
<code class="docutils literal"><span class="pre">__salt__['cmd.run']</span></code>, which we have mocked to return <code class="docutils literal"><span class="pre">1</span></code>.</p>
</div>
<div class="section" id="a-complex-example">
<h2>A Complex Example<a class="headerlink" href="#a-complex-example" title="永久链接至标题">¶</a></h2>
<p>Now consider the <code class="docutils literal"><span class="pre">assign()</span></code> function from the same
salt/modules/linux_sysctl.py source file.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">assign</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Assign a single sysctl parameter for this minion</span>

<span class="sd">    CLI Example:</span>

<span class="sd">    .. code-block:: bash</span>

<span class="sd">        salt &#39;*&#39; sysctl.assign net.ipv4.ip_forward 1</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="n">sysctl_file</span> <span class="o">=</span> <span class="s1">&#39;/proc/sys/{0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sysctl_file</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">CommandExecutionError</span><span class="p">(</span><span class="s1">&#39;sysctl {0} does not exist&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;sysctl -w {0}=&quot;{1}&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">__salt__</span><span class="p">[</span><span class="s1">&#39;cmd.run_all&#39;</span><span class="p">](</span><span class="n">cmd</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;stdout&#39;</span><span class="p">]</span>
    <span class="n">err</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;stderr&#39;</span><span class="p">]</span>

    <span class="c1"># Example:</span>
    <span class="c1">#    # sysctl -w net.ipv4.tcp_rmem=&quot;4096 87380 16777216&quot;</span>
    <span class="c1">#    net.ipv4.tcp_rmem = 4096 87380 16777216</span>
    <span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;^{0}\s+=\s+{1}$&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">name</span><span class="p">),</span>
                                                 <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">regex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">out</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;Invalid argument&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;retcode&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">err</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">out</span>
        <span class="k">raise</span> <span class="n">CommandExecutionError</span><span class="p">(</span><span class="s1">&#39;sysctl -w failed: {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
    <span class="n">new_name</span><span class="p">,</span> <span class="n">new_value</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; = &#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">ret</span><span class="p">[</span><span class="n">new_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_value</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</div>
<p>This function contains two raise statements and one return statement, so we
know that we will need (at least) three tests.  It has two function arguments
and many references to non-builtin functions.  In the tests below you will see
that MagicMock's <code class="docutils literal"><span class="pre">patch()</span></code> method may be used as a context manager or as a
decorator.</p>
<p>There are three test functions, one for each raise and return statement in the
source function.  Each function is self-contained and contains all and only the
mocks and data needed to test the raise or return statement it is concerned
with.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Import Salt Libs</span>
<span class="kn">from</span> <span class="nn">salt.modules</span> <span class="kn">import</span> <span class="n">linux_sysctl</span>
<span class="kn">from</span> <span class="nn">salt.exceptions</span> <span class="kn">import</span> <span class="n">CommandExecutionError</span>

<span class="c1"># Import Salt Testing Libs</span>
<span class="kn">from</span> <span class="nn">salttesting</span> <span class="kn">import</span> <span class="n">skipIf</span><span class="p">,</span> <span class="n">TestCase</span>
<span class="kn">from</span> <span class="nn">salttesting.helpers</span> <span class="kn">import</span> <span class="n">ensure_in_syspath</span>
<span class="kn">from</span> <span class="nn">salttesting.mock</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">MagicMock</span><span class="p">,</span>
    <span class="n">patch</span><span class="p">,</span>
    <span class="n">NO_MOCK</span><span class="p">,</span>
    <span class="n">NO_MOCK_REASON</span>
<span class="p">)</span>

<span class="n">ensure_in_syspath</span><span class="p">(</span><span class="s1">&#39;../../&#39;</span><span class="p">)</span>

<span class="c1"># Globals</span>
<span class="n">linux_sysctl</span><span class="o">.</span><span class="n">__salt__</span> <span class="o">=</span> <span class="p">{}</span>


<span class="nd">@skipIf</span><span class="p">(</span><span class="n">NO_MOCK</span><span class="p">,</span> <span class="n">NO_MOCK_REASON</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">LinuxSysctlTestCase</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    TestCase for salt.modules.linux_sysctl module</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;os.path.exists&#39;</span><span class="p">,</span> <span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">test_assign_proc_sys_failed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Tests if /proc/sys/&lt;kernel-subsystem&gt; exists or not</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pid&#39;</span><span class="p">:</span> <span class="mi">1337</span><span class="p">,</span> <span class="s1">&#39;retcode&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;stderr&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
               <span class="s1">&#39;stdout&#39;</span><span class="p">:</span> <span class="s1">&#39;net.ipv4.ip_forward = 1&#39;</span><span class="p">}</span>
        <span class="n">mock_cmd</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="n">cmd</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">patch</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">linux_sysctl</span><span class="o">.</span><span class="n">__salt__</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;cmd.run_all&#39;</span><span class="p">:</span> <span class="n">mock_cmd</span><span class="p">}):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">CommandExecutionError</span><span class="p">,</span>
                              <span class="n">linux_sysctl</span><span class="o">.</span><span class="n">assign</span><span class="p">,</span>
                              <span class="s1">&#39;net.ipv4.ip_forward&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;os.path.exists&#39;</span><span class="p">,</span> <span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">test_assign_cmd_failed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Tests if the assignment was successful or not</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pid&#39;</span><span class="p">:</span> <span class="mi">1337</span><span class="p">,</span> <span class="s1">&#39;retcode&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;stderr&#39;</span><span class="p">:</span>
               <span class="s1">&#39;sysctl: setting key &quot;net.ipv4.ip_forward&quot;: Invalid argument&#39;</span><span class="p">,</span>
               <span class="s1">&#39;stdout&#39;</span><span class="p">:</span> <span class="s1">&#39;net.ipv4.ip_forward = backward&#39;</span><span class="p">}</span>
        <span class="n">mock_cmd</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="n">cmd</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">patch</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">linux_sysctl</span><span class="o">.</span><span class="n">__salt__</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;cmd.run_all&#39;</span><span class="p">:</span> <span class="n">mock_cmd</span><span class="p">}):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">CommandExecutionError</span><span class="p">,</span>
                              <span class="n">linux_sysctl</span><span class="o">.</span><span class="n">assign</span><span class="p">,</span>
                              <span class="s1">&#39;net.ipv4.ip_forward&#39;</span><span class="p">,</span> <span class="s1">&#39;backward&#39;</span><span class="p">)</span>

    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;os.path.exists&#39;</span><span class="p">,</span> <span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">test_assign_success</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Tests the return of successful assign function</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pid&#39;</span><span class="p">:</span> <span class="mi">1337</span><span class="p">,</span> <span class="s1">&#39;retcode&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;stderr&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
               <span class="s1">&#39;stdout&#39;</span><span class="p">:</span> <span class="s1">&#39;net.ipv4.ip_forward = 1&#39;</span><span class="p">}</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;net.ipv4.ip_forward&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">}</span>
        <span class="n">mock_cmd</span> <span class="o">=</span> <span class="n">MagicMock</span><span class="p">(</span><span class="n">return_value</span><span class="o">=</span><span class="n">cmd</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">patch</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span><span class="n">linux_sysctl</span><span class="o">.</span><span class="n">__salt__</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;cmd.run_all&#39;</span><span class="p">:</span> <span class="n">mock_cmd</span><span class="p">}):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">linux_sysctl</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
                <span class="s1">&#39;net.ipv4.ip_forward&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">ret</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">integration</span> <span class="kn">import</span> <span class="n">run_tests</span>
    <span class="n">run_tests</span><span class="p">(</span><span class="n">LinuxSysctlTestCase</span><span class="p">,</span> <span class="n">needs_daemon</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


                            </div>
                            <a href="integration.html"><button data-container="body" data-toggle="tooltip" data-placement="bottom" title="Integration Tests" id="prev-button" type="button" class="btn btn-secondary"><span class="glyphicon glyphicon-chevron-left"></span> Previous</button></a>
                            <a href="../raet/index.html"><button data-container="body" data-toggle="tooltip" data-placement="bottom" title="raet" id="next-button" type="button" class="btn btn-primary">
                                Next <span class="glyphicon glyphicon-chevron-right"></span></button></a>
                        </div>
                    </div>
                    <div class="footer">
                        <hr />

                        
                    </div> <!--end footer-->

                    </div>
                </div>
            <!--start sidebar-->
            <div id="sidebar-wrapper">
            <div id="sidebar-static">

                <a class="ss-logo" href="http://saltstack.com"><img width="250" height="63" class="nolightbox sidebar-logo" src="../../../_static/images/saltstack_logo.svg"></a>

                
                <div class="versions">
                    <p>Version 2016.3.0-182-gbed98d8</p>
                </div>
                

                <div id="search-form" class="inner-addon left-addon">
                    <i class="glyphicon glyphicon-search"></i>
                    <input type="text" class="form-control">
                </div>

            </div> <!--end sidebar-static-->

                <div id="sidebar-nav">
                    
                    
                    
                    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">SaltStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">安装教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/index.html">Configuring Salt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using_salt.html">Using Salt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../execution/index.html">Remote Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../states/index.html">Configuration Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../event/index.html">Events &amp; Reactor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../orchestrate/index.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ssh/index.html">Salt SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/index.html">Salt云端</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proxyminion/index.html">Salt Proxy Minion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Salt Virt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ref/cli/index.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ref/index.html">Salt Module Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../topology/index.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../windows/index.html">Windows</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Salt开发</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../architecture.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html#salt-client">Salt Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html#salt-master">Salt Master</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html#salt-minion">Salt Minion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture.html#a-note-on-clearfuncs-vs-aesfuncs">A Note on ClearFuncs vs. AESFuncs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deprecations.html">代码弃用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dunder_dictionaries.html">Dunder Dictionaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_pillars.html">External Pillars</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hacking.html">Installing Salt for development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../labels.html">GitHub Labels and Milestones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">内部日志</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modular_systems.html">模块化系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../package_providers.html">Package Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reporting_bugs.html">Reporting Bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../salt_projects.html">Community Projects That Use Salt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topology.html">Salt Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translating.html">翻译文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial.html">Developing Salt Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html">Running The Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#automated-test-runs">Automated Test Runs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#writing-tests">Writing Tests</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#naming-conventions">Naming Conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#integration-tests">Integration Tests</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#unit-tests">Unit Tests</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="integration.html">Integration Tests</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="">Writing Unit Tests</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#introduction">引子</a></li>
<li class="toctree-l5"><a class="reference internal" href="#preparing-to-write-a-unit-test">Preparing to Write a Unit Test</a></li>
<li class="toctree-l5"><a class="reference internal" href="#a-simple-example">A Simple Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="#evaluating-truth">Evaluating Truth</a></li>
<li class="toctree-l5"><a class="reference internal" href="#tests-using-mock-objects">Tests Using Mock Objects</a></li>
<li class="toctree-l5"><a class="reference internal" href="#modifying-salt-in-place">Modifying <code class="docutils literal"><span class="pre">__salt__</span></code> In Place</a></li>
<li class="toctree-l5"><a class="reference internal" href="#a-more-complete-example">A More Complete Example</a></li>
<li class="toctree-l5"><a class="reference internal" href="#a-complex-example">A Complex Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../raet/index.html">raet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/index.html">SaltStack Git Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conventions/index.html">Salt Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ref/internals/index.html">Salt code and internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/index.html">Salt Based Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/writing_tests.html">编写Salt测试</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Release Notes</a></li>
</ul>

                    
                    
                </div>

                <div id="sidebar-static-bottom">
                <div class="text-nowrap">
                    <!--social icons from http://vervex.deviantart.com/art/somacro-45-300dpi-social-media-icons-267955425-->
                    <ul id="social-links" class="list-inline">
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="watch saltstack videos on youtube" href="https://www.youtube.com/user/saltstack" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/youtube-variation.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="view the latest saltstack tweets" href="http://twitter.com/saltstackinc" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/twitter.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="subscribe to the salt users mailing list" href="https://groups.google.com/forum/#!forum/salt-users" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/email.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="download saltstack code from github" href="https://github.com/saltstack/salt" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/github.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="chat in #salt on freenode irc" href="http://webchat.freenode.net/?channels=salt&uio=mj10cnvljjk9dhj1zsyxmd10cnvl83" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/messenger-generic.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="/r/saltstack" href="http://www.reddit.com/r/saltstack/" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/reddit.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="ask a saltstack question on stackoverflow" href="http://stackoverflow.com/questions/tagged/salt-stack" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/stackoverflow.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="join or start a saltstack meetup" href="http://www.meetup.com/find/?keywords=saltstack" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/meetup.png" ></a></li>
                        <li><a data-container="body" data-delay='{ "show": 500, "hide": 100 }' data-toggle="tooltip" data-placement="top" title="follow saltstack on linkedin" href="http://www.linkedin.com/company/salt-stack-inc" target="_blank"><img class="nolightbox" width="24" src="../../../_static/images/linkedin.png" ></a></li>
                    </ul>
                </div>
                </div>
            </div>
            <!--end sidebar-->

            </div> <!--end wrapper--> <!--end block content-->
        
    <script>
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../../',
            VERSION:     '2015.8.7',
            SEARCH_CX:   '004624818632696854117:yfmprrbw3pk',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  'true'
        };
    </script>

    <script src="../../../_static/js/core.min.js"></script>

    <script src="../../../_static/js/webhelp.min_v1.4.3.js"></script>

        
    </body>
</html>